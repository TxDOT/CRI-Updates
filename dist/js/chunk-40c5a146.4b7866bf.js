(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40c5a146"],{"008c":function(t,e,n){"use strict";n.d(e,"a",(function(){return T})),n.d(e,"b",(function(){return w})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return V})),n.d(e,"e",(function(){return E})),n.d(e,"f",(function(){return C})),n.d(e,"g",(function(){return I}));var i=n("b2b2"),r=n("a9ab");const a=(t,e,n)=>[e,n],s=(t,e,n)=>[e,n,t[2]],o=(t,e,n)=>[e,n,t[2],t[3]];function c(t){return t?{originPosition:"upper-left"===t.originPosition?"upperLeft":"lower-left"===t.originPosition?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance]:[1,1],translate:Object(i["l"])(t.extent)?[t.extent.xmin,t.extent.ymax]:[0,0]}:null}function l({scale:t,translate:e},n){return Math.round((n-e[0])/t[0])}function u({scale:t,translate:e},n){return Math.round((e[1]-n)/t[1])}function h(t,e,n){const i=[];let r,a,s,o;for(let c=0;c<n.length;c++){const h=n[c];c>0?(s=l(t,h[0]),o=u(t,h[1]),s===r&&o===a||(i.push(e(h,s-r,o-a)),r=s,a=o)):(r=l(t,h[0]),a=u(t,h[1]),i.push(e(h,r,a)))}return i.length>0?i:null}function p(t,e,n,i){return h(t,n?i?o:s:i?s:a,e)}function d(t,e,n,i){const r=[],c=n?i?o:s:i?s:a;for(let a=0;a<e.length;a++){const n=h(t,c,e[a]);n&&n.length>=3&&r.push(n)}return r.length?r:null}function b(t,e,n,i){const r=[],c=n?i?o:s:i?s:a;for(let a=0;a<e.length;a++){const n=h(t,c,e[a]);n&&n.length>=2&&r.push(n)}return r.length?r:null}function f({scale:t,translate:e},n){return n*t[0]+e[0]}function m({scale:t,translate:e},n){return e[1]-n*t[1]}function g(t,e,n){const i=new Array(n.length);if(!n.length)return i;const[r,a]=t.scale;let s=f(t,n[0][0]),o=m(t,n[0][1]);i[0]=e(n[0],s,o);for(let c=1;c<n.length;c++){const t=n[c];s+=t[0]*r,o-=t[1]*a,i[c]=e(t,s,o)}return i}function y(t,e,n){const i=new Array(n.length);for(let r=0;r<n.length;r++)i[r]=g(t,e,n[r]);return i}function O(t,e,n,i){return g(t,n?i?o:s:i?s:a,e)}function v(t,e,n,i){return y(t,n?i?o:s:i?s:a,e)}function j(t,e,n,i){return y(t,n?i?o:s:i?s:a,e)}function x(t,e,n,i,r){return e.xmin=l(t,n.xmin),e.ymin=u(t,n.ymin),e.xmax=l(t,n.xmax),e.ymax=u(t,n.ymax),e!==n&&(i&&(e.zmin=n.zmin,e.zmax=n.zmax),r&&(e.mmin=n.mmin,e.mmax=n.mmax)),e}function _(t,e,n,i,r){return e.points=p(t,n.points,i,r),e}function w(t,e,n,i,r){return e.x=l(t,n.x),e.y=u(t,n.y),e!==n&&(i&&(e.z=n.z),r&&(e.m=n.m)),e}function M(t,e,n,i,r){const a=d(t,n.rings,i,r);return a?(e.rings=a,e):null}function S(t,e,n,i,r){const a=b(t,n.paths,i,r);return a?(e.paths=a,e):null}function T(t,e){return t&&e?Object(r["f"])(e)?w(t,{},e,!1,!1):Object(r["h"])(e)?S(t,{},e,!1,!1):Object(r["g"])(e)?M(t,{},e,!1,!1):Object(r["e"])(e)?_(t,{},e,!1,!1):Object(r["d"])(e)?x(t,{},e,!1,!1):null:null}function V(t,e,n,r,a){return Object(i["l"])(n)&&(e.points=O(t,n.points,r,a)),e}function E(t,e,n,r,a){return Object(i["k"])(n)||(e.x=f(t,n.x),e.y=m(t,n.y),e!==n&&(r&&(e.z=n.z),a&&(e.m=n.m))),e}function C(t,e,n,r,a){return Object(i["l"])(n)&&(e.rings=j(t,n.rings,r,a)),e}function I(t,e,n,r,a){return Object(i["l"])(n)&&(e.paths=v(t,n.paths,r,a)),e}},"04f0":function(t,e,n){"use strict";n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return O})),n.d(e,"d",(function(){return G})),n.d(e,"e",(function(){return x})),n.d(e,"f",(function(){return p})),n.d(e,"g",(function(){return L})),n.d(e,"h",(function(){return u}));var i=n("dae5"),r=n("b139"),a=n("0b2d"),s=n("4212"),o=n("e431"),c=n("7577");function l(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function u(t,e,n){n*=.5;const i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function h(t,e){const n=2*Math.acos(e[3]),i=Math.sin(n/2);return i>s["a"]?(t[0]=e[0]/i,t[1]=e[1]/i,t[2]=e[2]/i):(t[0]=1,t[1]=0,t[2]=0),n}function p(t,e,n){const i=e[0],r=e[1],a=e[2],s=e[3],o=n[0],c=n[1],l=n[2],u=n[3];return t[0]=i*u+s*o+r*l-a*c,t[1]=r*u+s*c+a*o-i*l,t[2]=a*u+s*l+i*c-r*o,t[3]=s*u-i*o-r*c-a*l,t}function d(t,e,n){n*=.5;const i=e[0],r=e[1],a=e[2],s=e[3],o=Math.sin(n),c=Math.cos(n);return t[0]=i*c+s*o,t[1]=r*c+a*o,t[2]=a*c-r*o,t[3]=s*c-i*o,t}function b(t,e,n){n*=.5;const i=e[0],r=e[1],a=e[2],s=e[3],o=Math.sin(n),c=Math.cos(n);return t[0]=i*c-a*o,t[1]=r*c+s*o,t[2]=a*c+i*o,t[3]=s*c-r*o,t}function f(t,e,n){n*=.5;const i=e[0],r=e[1],a=e[2],s=e[3],o=Math.sin(n),c=Math.cos(n);return t[0]=i*c+r*o,t[1]=r*c-i*o,t[2]=a*c+s*o,t[3]=s*c-a*o,t}function m(t,e){const n=e[0],i=e[1],r=e[2];return t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r)),t}function g(t,e,n,i){const r=e[0],a=e[1],o=e[2],c=e[3];let l,u,h,p,d,b=n[0],f=n[1],m=n[2],g=n[3];return u=r*b+a*f+o*m+c*g,u<0&&(u=-u,b=-b,f=-f,m=-m,g=-g),1-u>s["a"]?(l=Math.acos(u),h=Math.sin(l),p=Math.sin((1-i)*l)/h,d=Math.sin(i*l)/h):(p=1-i,d=i),t[0]=p*r+d*b,t[1]=p*a+d*f,t[2]=p*o+d*m,t[3]=p*c+d*g,t}function y(t){const e=Object(s["b"])(),n=Object(s["b"])(),i=Object(s["b"])(),r=Math.sqrt(1-e),a=Math.sqrt(e);return t[0]=r*Math.sin(2*Math.PI*n),t[1]=r*Math.cos(2*Math.PI*n),t[2]=a*Math.sin(2*Math.PI*i),t[3]=a*Math.cos(2*Math.PI*i),t}function O(t,e){const n=e[0],i=e[1],r=e[2],a=e[3],s=n*n+i*i+r*r+a*a,o=s?1/s:0;return t[0]=-n*o,t[1]=-i*o,t[2]=-r*o,t[3]=a*o,t}function v(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function j(t,e){const n=e[0]+e[4]+e[8];let i;if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{let n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);const r=(n+1)%3,a=(n+2)%3;i=Math.sqrt(e[3*n+n]-e[3*r+r]-e[3*a+a]+1),t[n]=.5*i,i=.5/i,t[3]=(e[3*r+a]-e[3*a+r])*i,t[r]=(e[3*r+n]+e[3*n+r])*i,t[a]=(e[3*a+n]+e[3*n+a])*i}return t}function x(t,e,n,i){const r=.5*Math.PI/180;e*=r,n*=r,i*=r;const a=Math.sin(e),s=Math.cos(e),o=Math.sin(n),c=Math.cos(n),l=Math.sin(i),u=Math.cos(i);return t[0]=a*c*u-s*o*l,t[1]=s*o*u+a*c*l,t[2]=s*c*l-a*o*u,t[3]=s*c*u+a*o*l,t}function _(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}const w=c["c"],M=c["l"],S=c["a"],T=p,V=c["b"],E=c["d"],C=c["j"],I=c["e"],P=I,k=c["f"],R=k,z=c["k"],G=c["g"],A=c["h"];function L(t,e,n){const i=Object(o["h"])(e,n);return i<-.999999?(Object(o["g"])(D,F,e),Object(o["y"])(D)<1e-6&&Object(o["g"])(D,H,e),Object(o["r"])(D,D),u(t,D,Math.PI),t):i>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(Object(o["g"])(D,e,n),t[0]=D[0],t[1]=D[1],t[2]=D[2],t[3]=1+i,z(t,t))}const D=Object(a["f"])(),F=Object(a["h"])(1,0,0),H=Object(a["h"])(0,1,0);function Z(t,e,n,i,r,a){return g(U,e,r,a),g(W,n,i,a),g(t,U,W,2*a*(1-a)),t}const U=Object(r["b"])(),W=Object(r["b"])();function q(t,e,n,i){const r=B;return r[0]=n[0],r[3]=n[1],r[6]=n[2],r[1]=i[0],r[4]=i[1],r[7]=i[2],r[2]=-e[0],r[5]=-e[1],r[8]=-e[2],z(t,j(t,r))}const B=Object(i["b"])();Object.freeze({__proto__:null,identity:l,setAxisAngle:u,getAxisAngle:h,multiply:p,rotateX:d,rotateY:b,rotateZ:f,calculateW:m,slerp:g,random:y,invert:O,conjugate:v,fromMat3:j,fromEuler:x,str:_,copy:w,set:M,add:S,mul:T,scale:V,dot:E,lerp:C,length:I,len:P,squaredLength:k,sqrLen:R,normalize:z,exactEquals:G,equals:A,rotationTo:L,sqlerp:Z,setAxes:q})},"0fc4":function(t,e,n){"use strict";function i(){return[0,0,0,0]}function r(t){return[t[0],t[1],t[2],t[3]]}function a(t,e,n,i){return[t,e,n,i]}function s(t){const e=i(),n=Math.min(4,t.length);for(let i=0;i<n;++i)e[i]=t[i];return e}function o(t,e){return new Float64Array(t,e,4)}function c(){return i()}function l(){return a(1,1,1,1)}function u(){return a(1,0,0,0)}function h(){return a(0,1,0,0)}function p(){return a(0,0,1,0)}function d(){return a(0,0,0,1)}n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"f",(function(){return s})),n.d(e,"g",(function(){return a}));const b=c(),f=l(),m=u(),g=h(),y=p(),O=d();Object.freeze({__proto__:null,create:i,clone:r,fromValues:a,fromArray:s,createView:o,zeros:c,ones:l,unitX:u,unitY:h,unitZ:p,unitW:d,ZEROS:b,ONES:f,UNIT_X:m,UNIT_Y:g,UNIT_Z:y,UNIT_W:O})},1381:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));n("e06a");var i=n("8d60"),r=(n("1fd7"),n("c649")),a=n("a915"),s=n("3349"),o=n("02f1"),c=n("0b2d"),l=n("7779"),u=n("c9fb"),h=n("65a7"),p=n("4dc9"),d=n("db52"),b=n("4cac"),f=n("4ae5"),m=n("521c");class g extends h["a"]{constructor(t){super(),this.graphicsLayer=t}visualizeIntersectionPoint(t,e){return this._visualizeSnappingIndicator(new f["a"]({x:t.intersectionPoint[0],y:t.intersectionPoint[1],spatialReference:e.coordinateHelper.spatialReference}),v)}visualizePoint(t,e){return this._visualizeSnappingIndicator(new f["a"]({x:t.point[0],y:t.point[1],spatialReference:e.coordinateHelper.spatialReference}),j)}visualizeLine(t,e){return this._visualizeSnappingIndicator(new m["a"]({paths:[[t.lineStart,t.lineEnd]],spatialReference:e.coordinateHelper.spatialReference}),x)}visualizeParallelSign(t,e){return this._visualizeSnappingIndicator(new m["a"]({paths:[[t.lineStart,t.lineEnd]],spatialReference:e.coordinateHelper.spatialReference}),_)}visualizeRightAngleQuad(t,e){return this._visualizeSnappingIndicator(new m["a"]({paths:[[t.previousVertex,t.centerVertex,t.nextVertex]],spatialReference:e.coordinateHelper.spatialReference}),T(t))}_visualizeSnappingIndicator(t,e){const n=new i["a"]({geometry:t,symbol:e});return this.graphicsLayer.add(n),Object(r["c"])(()=>{this.graphicsLayer.remove(n)})}}const y=l["a"].main.toArray(),O=[...l["a"].main.toRgb(),100],v=new p["a"]({outline:new d["a"]({width:1.5,color:y}),size:15,color:[0,0,0,0]}),j=new p["a"]({outline:{width:.5,color:[0,0,0,1]},size:10,color:y}),x=new b["a"]({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:Object(a["h"])(u["a"].lineHintWidthTarget),color:y}]}}}),_=new b["a"]({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:y}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:y}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),w=t=>new b["a"]({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:"Relative",size:Object(a["h"])(u["a"].rightAngleHintSize),rotation:t,markerPlacement:{type:"CIMMarkerPlacementOnVertices",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:Object(a["h"])(u["a"].rightAngleHintOutlineSize),color:y},{type:"CIMSolidFill",enable:!0,color:O}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),M=w(45),S=w(225),T=(()=>{const t=Object(o["a"])(),e=Object(o["a"])(),n=Object(c["f"])();return i=>(Object(s["f"])(t,i.centerVertex,i.previousVertex),Object(s["f"])(e,i.nextVertex,i.previousVertex),Object(s["j"])(n,t,e),n[2]<0?M:S)})()},1803:function(t,e,n){"use strict";n.r(e),n.d(e,"DrawGraphicTool2D",(function(){return v}));var i=n("a4ee"),r=(n("e06a"),n("8d60")),a=n("c649"),s=n("b2b2"),o=n("59b2"),c=(n("b50f"),n("c120"),n("cea0"),n("d386")),l=n("1381"),u=(n("1fd7"),n("4cac")),h=n("4dc9");const p=new u["a"]({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[3.75,3.75],lineDashEnding:"HalfPattern",controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:1.6,color:[255,255,255,255]},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:2,color:[0,0,0,255]}]}}}),d=new h["a"]({style:"circle",size:6,color:[127,127,127,1],outline:{color:[50,50,50],width:1}}),b=new h["a"]({style:"circle",size:6,color:[255,127,0,1],outline:{color:[50,50,50],width:1}});var f=n("ae3c"),m=n("e7e3"),g=n("5bab"),y=n("4ae5"),O=n("57dc");let v=class extends f["a"]{constructor(t){super(t),this._visualElementGraphics={outline:null,regularVertices:null,activeVertex:null},this.activeFillSymbol=null,this.type="draw-2d",this._visualElementSymbols={outline:Object(s["u"])(t.activeLineSymbol,p),regularVertices:Object(s["u"])(t.regularVerticesSymbol,d),activeVertex:Object(s["u"])(t.activeVertexSymbol,b),fill:Object(s["t"])(t.activeFillSymbol)}}initializeGraphic(t){return Object(s["l"])(this._visualElementSymbols.fill)&&(t.symbol=this._visualElementSymbols.fill),null}makeDrawOperation(){const t=this.view;return new m["a"]({view:t,manipulators:this.manipulators,geometryType:Object(f["b"])(this.geometryType),drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,drawSurface:new g["b"](t),hasM:!1,snappingManager:this.snappingManager,snappingVisualizer:new l["a"](this.internalGraphicsLayer)})}onActiveVertexChanged(t){if("point"===this.geometryType)return null;const[e,n]=t,i=new y["a"]({x:e,y:n,spatialReference:this.drawOperation.spatialReference});return Object(s["l"])(this._visualElementGraphics.activeVertex)?(this._visualElementGraphics.activeVertex.geometry=i,null):(this._visualElementGraphics.activeVertex=new r["a"]({geometry:i,symbol:this._visualElementSymbols.activeVertex,attributes:{displayOrder:2}}),this.internalGraphicsLayer.add(this._visualElementGraphics.activeVertex),this.internalGraphicsLayer.graphics.sort(j),Object(a["c"])(()=>{Object(s["l"])(this._visualElementGraphics.activeVertex)&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.activeVertex),this._visualElementGraphics.activeVertex=Object(s["e"])(this._visualElementGraphics.activeVertex))}))}onOutlineChanged(t){const e=t.clone();if("polyline"===e.type){const t=e.paths[e.paths.length-1];t.splice(0,t.length-2)}return Object(s["l"])(this._visualElementGraphics.outline)?(this._visualElementGraphics.outline.geometry=e,null):(this._visualElementGraphics.outline=new r["a"]({geometry:e,symbol:this._visualElementSymbols.outline,attributes:{displayOrder:0}}),this.internalGraphicsLayer.add(this._visualElementGraphics.outline),this.internalGraphicsLayer.graphics.sort(j),Object(a["c"])(()=>{Object(s["l"])(this._visualElementGraphics.outline)&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.outline),this._visualElementGraphics.outline=Object(s["e"])(this._visualElementGraphics.outline))}))}onRegularVerticesChanged(t){const e=new O["a"]({points:t,spatialReference:this.drawOperation.spatialReference});return Object(s["l"])(this._visualElementGraphics.regularVertices)?(this._visualElementGraphics.regularVertices.geometry=e,null):(this._visualElementGraphics.regularVertices=new r["a"]({geometry:e,symbol:this._visualElementSymbols.regularVertices,attributes:{displayOrder:1}}),this.internalGraphicsLayer.add(this._visualElementGraphics.regularVertices),this.internalGraphicsLayer.graphics.sort(j),Object(a["c"])(()=>{Object(s["l"])(this._visualElementGraphics.regularVertices)&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.regularVertices),this._visualElementGraphics.regularVertices=Object(s["e"])(this._visualElementGraphics.regularVertices))}))}};function j(t,e){var n,i,r,a;return(null!=(n=null==(i=t.attributes)?void 0:i.displayOrder)?n:-1/0)-(null!=(r=null==(a=e.attributes)?void 0:a.displayOrder)?r:-1/0)}Object(i["a"])([Object(o["b"])()],v.prototype,"activeFillSymbol",void 0),Object(i["a"])([Object(o["b"])({readOnly:!0})],v.prototype,"type",void 0),Object(i["a"])([Object(o["b"])({constructOnly:!0,nonNullable:!0})],v.prototype,"view",void 0),v=Object(i["a"])([Object(c["a"])("esri.views.2d.interactive.draw.DrawGraphicTool2D")],v)},"1a54":function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return h})),n.d(e,"d",(function(){return p})),n.d(e,"e",(function(){return d})),n.d(e,"f",(function(){return o})),n.d(e,"g",(function(){return l})),n.d(e,"h",(function(){return u}));n("f0b9"),n("c120");var i=n("b2b2"),r=(n("a21b"),n("f2e0"),n("5996"),n("4261")),a=n("9180");n("008c"),n("74e2"),n("a1f3"),n("3563");class s{constructor(t,e,n){this.uid=t,this.geometry=e,this.attributes=n,this.visible=!0,this.objectId=null,this.centroid=null}}function o(t){return Object(i["l"])(t.geometry)}class c{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}}function l(t,e,n,i){return{x:t,y:e,z:n,hasZ:null!=n,hasM:!1,spatialReference:i,type:"point"}}function u(t){if(Object(i["k"])(t))return 0;switch(t.type){case"point":return 1;case"polyline":{let e=0;for(const n of t.paths)e+=n.length;return e}case"polygon":{let e=0;for(const n of t.rings)e+=n.length;return e}case"multipoint":return t.points.length;case"extent":return 2;case"mesh":{const e=t.vertexAttributes&&t.vertexAttributes.position;return e?e.length/3:0}default:return}}function h(t,e){switch(Object(r["h"])(e),"mesh"===t.type&&(t=t.extent),t.type){case"point":e[0]=e[3]=t.x,e[1]=e[4]=t.y,t.hasZ&&(e[2]=e[5]=t.z);break;case"polyline":for(let n=0;n<t.paths.length;n++)Object(r["l"])(e,t.paths[n],t.hasZ);break;case"polygon":for(let n=0;n<t.rings.length;n++)Object(r["l"])(e,t.rings[n],t.hasZ);break;case"multipoint":Object(r["l"])(e,t.points,t.hasZ);break;case"extent":e[0]=t.xmin,e[1]=t.ymin,e[3]=t.xmax,e[4]=t.ymax,null!=t.zmin&&(e[2]=t.zmin),null!=t.zmax&&(e[5]=t.zmax)}}function p(t,e){switch(Object(a["m"])(e),"mesh"===t.type&&(t=t.extent),t.type){case"point":e[0]=e[2]=t.x,e[1]=e[3]=t.y;break;case"polyline":for(let n=0;n<t.paths.length;n++)Object(a["p"])(e,t.paths[n]);break;case"polygon":for(let n=0;n<t.rings.length;n++)Object(a["p"])(e,t.rings[n]);break;case"multipoint":Object(a["p"])(e,t.points);break;case"extent":e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax}}function d(t,e){return null!=t.objectId?t.objectId:t.attributes&&e?t.attributes[e]:null}Object(r["f"])(),Object(a["l"])()},2119:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("2ab7");class r{constructor(t){this.allocator=t,this._items=[],this._itemsPtr=0,this.grow()}get(){return 0===this._itemsPtr&&Object(i["a"])(()=>this.reset()),this._itemsPtr===this._items.length&&this.grow(),this._items[this._itemsPtr++]}reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*a);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,a));t++)this._items.push(this.allocator())}}const a=1024},3563:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("c120"),n("b2b2");function i(t,e){return!!r(t.spatialReference,e.spatialReference)&&t.x===e.x&&t.y===e.y&&t.z===e.z&&t.m===e.m}function r(t,e){return t===e||t&&e&&t.equals(e)}},4772:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var i=n("a4ee"),r=n("fc29"),a=n("e92d"),s=n("b2b2"),o=n("f4cc"),c=n("59b2"),l=(n("b50f"),n("c120"),n("cea0"),n("d386")),u=n("7aa6"),h=n("2c4f");class p{constructor(){this._isToolEditable=!0,this._manipulators=new h["a"],this._nextManipulatorId=0,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(t){this._isToolEditable=t}get length(){return this._manipulators.length}add(t,e=0){return this.addMany([t],e)[0]}addMany(t,e=0){return t.map(t=>{const n=this._nextManipulatorId++,i={id:n,manipulator:t,visibilityPredicate:e,attached:!1};return this._manipulators.add(i),this._attached&&this._updateManipulatorAttachment(i),n})}remove(t){if("number"==typeof t){const e=t;for(let t=0;t<this._manipulators.length;t++)if(this._manipulators.getItemAt(t).id===e){const e=this._manipulators.splice(t,1)[0];return this._detachManipulator(e),e.id}return null}const e=t;for(let n=0;n<this._manipulators.length;n++)if(this._manipulators.getItemAt(n).manipulator===e){const t=this._manipulators.splice(n,1)[0];return this._detachManipulator(t),t.id}return null}removeAll(){this._manipulators.forEach(t=>{this._detachManipulator(t)}),this._manipulators.removeAll()}attach(){this._manipulators.forEach(t=>{this._updateManipulatorAttachment(t)}),this._attached=!0}detach(){this._manipulators.forEach(t=>{this._detachManipulator(t)}),this._attached=!1}destroy(){this._manipulators.forEach(({manipulator:t})=>{t.destroy&&t.destroy()}),this._manipulators.destroy(),this._resourceContexts=null}on(t,e){return this._manipulators.on(t,t=>{e(t)})}forEach(t){for(const e of this._manipulators.items)t(e)}some(t){return this._manipulators.items.some(t)}toArray(){const t=[];return this.forEach(e=>t.push(e.manipulator)),t}intersect(t,e){let n=null,i=Number.MAX_VALUE;return this._manipulators.forEach(({id:r,manipulator:a,attached:o})=>{if(!o||!a.interactive)return;const c=a.intersectionDistance(t,e);Object(s["l"])(c)&&c<i&&(i=c,n={id:r,manipulator:a})}),n}findById(t){if(Object(s["k"])(t))return null;for(const e of this._manipulators.items)if(t===e.id)return e.manipulator;return null}_updateManipulatorAttachment(t){this._isManipulatorItemVisible(t)?this._attachManipulator(t):this._detachManipulator(t)}_attachManipulator(t){t.attached||(t.manipulator.attach&&t.manipulator.attach(this._resourceContexts),t.attached=!0)}_detachManipulator(t){if(!t.attached)return;const e=t.manipulator;e.grabbing=!1,e.dragging=!1,e.hovering=!1,e.selected=!1,e.detach&&e.detach(this._resourceContexts),t.attached=!1}_isManipulatorItemVisible(t){return 2===t.visibilityPredicate||(this._isToolEditable?0===t.visibilityPredicate:1===t.visibilityPredicate)}}const d=a["a"].getLogger("esri.views.interactive.InteractiveToolBase");let b=class extends r["a"]{constructor(t){super(t),this.toolState="pending",this.completed=!1,this.manipulators=new p,this.updating=!1,this.automaticManipulatorSelection=!0,this._editableFlags=new Map([[1,!0],[0,!0]]),this._creationStartedResolver=Object(o["f"])(),this._creationFinishedResolver=Object(o["f"])()}get active(){return null!=this.view&&this.view.activeTool===this}set visible(t){this._set("visible",t),t||this.active&&(this.view.activeTool=null),this.attached&&(t?this._show():this._hide())}get editable(){return this.getEditableFlag(0)}set editable(t){this.setEditableFlag(0,t)}get attached(){return this._get("attached")}get created(){return"created"===this.toolState}get cursor(){return null}attach(){this.attached?d.warn("Tool is already attached. Ignoring attach request."):(this.manipulators.attach(),this.onAttach(),this.visible&&this.onShow(),this._set("attached",!0))}detach(){this.attached?(this.visible&&this.onHide(),this.onDetach(),this.manipulators.detach(),this._set("attached",!1)):d.error("Tool isn't currently attached. Ignoring detach request.")}activate(){Object(s["k"])(this.view)?d.error("Can't activate tool if view is not defined."):this.active?d.warn("Tool is already active, ignoring activation request."):(Object(u["b"])(this.view)&&this.view.focus(),this.onActivate())}deactivate(){this.active?this.onDeactivate():d.warn("Tool is not active, ignoring deactivation request.")}handleInputEvent(t){this.attached?this.onInputEvent(t):d.warn("handleInputEvent() called on detached tool")}handleInputEventAfter(t){this.attached?this.onInputEventAfter(t):d.warn("handleInputEventAfter() called on detached tool")}destroy(){this.manipulators.destroy(),this._set("view",null),this._set("completed",!1)}setEditableFlag(t,e){this._editableFlags.set(t,e),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),0===t&&this.notifyChange("editable"),this.onEditableChange()}getEditableFlag(t){return this._editableFlags.get(t)}whenCreationStarted(){return this._creationStartedResolver.promise}whenCreated(){return this._creationFinishedResolver.promise}rejectCreation(t){"pending"!==this.toolState&&"creating"!==this.toolState||this._creationStartedResolver.resolve(this),this._creationFinishedResolver.reject(t)}onActivate(){}onDeactivate(){}onAttach(){}onDetach(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(t){}onInputEventAfter(t){}get internallyEditable(){return this.getEditableFlag(0)&&this.getEditableFlag(1)}startToolCreation(){if("pending"===this.toolState)return this._creationStartedResolver.resolve(this),void(this.toolState="creating");throw new Error("Unexpected tool state "+this.toolState)}finishToolCreation(){switch(this.toolState){case"pending":this.startToolCreation();case"creating":this.created||this._creationFinishedResolver.resolve(this),this.toolState="created";break;case"created":break;default:throw new Error("Unexpected tool state "+this.toolState)}}complete(){this.finishToolCreation(),this._set("completed",!0)}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.attached&&this.visible?this.manipulators.attach():this.manipulators.detach()}};Object(i["a"])([Object(c["b"])()],b.prototype,"toolState",void 0),Object(i["a"])([Object(c["b"])({constructOnly:!0})],b.prototype,"view",void 0),Object(i["a"])([Object(c["b"])({readOnly:!0})],b.prototype,"active",null),Object(i["a"])([Object(c["b"])({value:!0})],b.prototype,"visible",null),Object(i["a"])([Object(c["b"])({value:!0})],b.prototype,"editable",null),Object(i["a"])([Object(c["b"])({value:!1,readOnly:!0})],b.prototype,"attached",null),Object(i["a"])([Object(c["b"])({readOnly:!0})],b.prototype,"created",null),Object(i["a"])([Object(c["b"])({readOnly:!0})],b.prototype,"completed",void 0),Object(i["a"])([Object(c["b"])({readOnly:!0})],b.prototype,"manipulators",void 0),Object(i["a"])([Object(c["b"])({readOnly:!0})],b.prototype,"updating",void 0),Object(i["a"])([Object(c["b"])()],b.prototype,"cursor",null),Object(i["a"])([Object(c["b"])()],b.prototype,"automaticManipulatorSelection",void 0),b=Object(i["a"])([Object(l["a"])("esri.views.interactive.InteractiveToolBase")],b)},"5bab":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return c}));var i=n("b2b2"),r=n("a915"),a=n("1a54"),s=n("f408");class o{constructor(t,e,n,i=null){this.elevationInfo=t,this.defaultZ=e,this.view=n,this.excludeGraphics=i}screenToMap(t){if(Object(i["l"])(this.defaultZ))return this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(r["f"])(t.x,t.y),this.elevationInfo,this.defaultZ,this.excludeGraphics);const e=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(r["f"])(t.x,t.y),this.elevationInfo,0,this.excludeGraphics);return Object(i["l"])(e)&&(e.z=void 0),e}mapToScreen(t){const e=Object(a["g"])(t.x,t.y,Object(s["a"])(this.view,t,this.elevationInfo),t.spatialReference);return this.view.toScreen(e)}}class c{constructor(t,e,n=[]){this.view=t,this.elevationInfo=e,this.exclude=n}screenToMap(t){const e=this.view.toMap(t,{exclude:this.exclude});return Object(i["l"])(e)&&(e.z=Object(s["g"])(e,this.view,this.elevationInfo)),e}mapToScreen(t){let e=t;return Object(i["l"])(this.elevationInfo)&&(e=Object(a["g"])(t.x,t.y,Object(s["a"])(this.view,t,this.elevationInfo),t.spatialReference)),this.view.toScreen(e)}}class l{constructor(t){this.view=t,this.screenToMap=e=>t.toMap(e),this.mapToScreen=e=>t.toScreen(e)}}},7361:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return b}));var i=n("2ab7"),r=n("dae5"),a=n("afe1"),s=n("b139"),o=n("02f1"),c=n("0b2d"),l=n("0fc4");class u{constructor(t,e,n){this.itemByteSize=t,this.itemCreate=e,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(n/this.itemByteSize)}get(){0===this._itemsPtr&&Object(i["a"])(()=>this.reset());const t=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=t;){const t=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let e=0;e<this._itemsPerBuffer;++e)this._items.push(this.itemCreate(t,e*this.itemByteSize));this._buffers.push(t)}return this._items[this._itemsPtr++]}reset(){const t=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>t;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(t=h){return new u(16,o["c"],t)}static createVec3f64(t=h){return new u(24,c["e"],t)}static createVec4f64(t=h){return new u(32,l["c"],t)}static createMat3f64(t=h){return new u(72,r["a"],t)}static createMat4f64(t=h){return new u(128,a["b"],t)}static createQuatf64(t=h){return new u(32,s["d"],t)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}const h=4096,p=u.createVec2f64(),d=u.createVec3f64(),b=u.createVec4f64(),f=(u.createMat3f64(),u.createMat4f64()),m=u.createQuatf64()},7779:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return p}));var i=n("9ef0");const r={main:new i["a"]([255,127,0]),selected:new i["a"]([255,255,255]),outline:new i["a"]([0,0,0,.5]),selectedOutline:new i["a"]([255,255,255]),hoverOutline:new i["a"]([255,255,255]),secondary:new i["a"]([255,255,255]),secondaryOutline:new i["a"]([100,100,100]),transparent:new i["a"]([0,0,0,0])};function a(t,e){if(e)for(const n in e)t[n]=e[n]}class s{constructor(t){this.size=8,this.hoverSize=10,this.color=r.main,this.hoverColor=r.main,this.outlineColor=r.outline,this.hoverOutlineColor=r.hoverOutline,a(this,t)}}class o{constructor(t){this.color=r.secondary,this.hoverColor=r.main,a(this,t)}}class c{constructor(t){this.color=r.transparent,this.hoverColor=r.transparent,this.outlineColor=r.main,this.hoverOutlineColor=r.main,this.stagedColor=r.transparent,this.stagedOutlineColor=r.secondary,a(this,t)}}class l{constructor(t){this.vertex=new s,this.midpoint=new s({color:r.secondary,outlineColor:r.secondaryOutline,size:6}),this.selected=new s({color:r.selected,hoverColor:r.selected,hoverOutlineColor:r.hoverOutline}),a(this,t)}}class u{constructor(t){this.center=new s({color:r.secondaryOutline}),this.fill=new c,this.line=new o,this.vertex=new s({color:r.selected,outlineColor:r.main,hoverColor:r.selected,hoverOutlineColor:r.secondaryOutline}),a(this,t)}}class h{constructor(t){this.reshapeGraphics=new l,this.transformGraphics=new u,a(this,t)}}const p=new h},"8a19":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("b2b2"),r=n("f4cc"),a=n("3563"),s=n("c20d"),o=n("1f1c"),c=n("9305");class l{constructor(){this.next=new s["a"]}createSnapDragEventPipelineStep({predicate:t=(()=>!0),cancel:e,snappingManager:n,snappingContext:l,updatingHandles:u}){if(Object(i["k"])(n))return t=>t;let h=null,p=null;const d=()=>{h=Object(i["a"])(h),n.doneSnapping(),Object(i["l"])(p)&&p.frameTask.remove(),p=null};return e.next(t=>(d(),t)),this.next=new s["a"],e=>{if(!t(e))return e;if(h=Object(i["a"])(h),"start"===e.action){const t="3d"===n.view.type?n.view.resourceController.scheduler.registerTask(c["b"].SNAPPING):c["a"];p={context:new o["a"]({editGeometryOperations:l.editGeometryOperations,elevationInfo:l.elevationInfo,pointer:l.pointer,vertexHandle:Object(i["l"])(e.info)?e.info.handle:null,excludeFeature:l.excludeFeature,visualizer:l.visualizer}),originalPos:Object(i["l"])(e.snapOrigin)?l.coordinateHelper.vectorToDehydratedPoint(e.snapOrigin):e.mapStart,frameTask:t}}if(Object(i["l"])(p)){const t=p.context.coordinateHelper.vectorToDehydratedPoint(p.context.coordinateHelper.arrayToVector([p.originalPos.x,p.originalPos.y,p.originalPos.z]));t.x+=e.mapEnd.x-e.mapStart.x,t.y+=e.mapEnd.y-e.mapStart.y;const i=e.mapStart.x-p.originalPos.x,s=e.mapStart.y-p.originalPos.y,o={...e,action:"udpate"},c=p.context,l=n.update(t,p.context);if(e.mapEnd.x=l.x+i,e.mapEnd.y=l.y+s,"end"!==e.action){const e=p.frameTask;h=Object(r["g"])(async r=>{const u=await e.schedule(()=>n.snap(t,c,r),r);if(u.valid){const t=await e.schedule(()=>u.apply(),r);Object(a["a"])(t,l)||(o.mapEnd.x=t.x+i,o.mapEnd.y=t.y+s,this.next.execute(o))}}),u.addPromise(h.promise)}}return"end"===e.action&&d(),e}}}},a1b1:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return o}));var i=n("38a4"),r=n("e431"),a=n("0b2d");function s(t,e,n){const i=Object(r["h"])(t,e)/Object(r["h"])(t,t);return Object(r["e"])(n,t,i)}function o(t,e){return Object(r["h"])(t,e)/Object(r["p"])(t)}function c(t,e){const n=Object(r["h"])(t,e)/(Object(r["p"])(t)*Object(r["p"])(e));return-Object(i["a"])(n)}function l(t,e,n){Object(r["r"])(u,t),Object(r["r"])(h,e);const a=Object(r["h"])(u,h),s=Object(i["a"])(a),o=Object(r["g"])(u,u,h);return Object(r["h"])(o,n)<0?2*Math.PI-s:s}const u=Object(a["f"])(),h=Object(a["f"])()},ae3c:function(t,e,n){"use strict";n.d(e,"a",(function(){return W})),n.d(e,"b",(function(){return N}));var i=n("a4ee"),r=n("8d60"),a=(n("c120"),n("ce6d")),s=n("9096"),o=n("c649"),c=n("b2b2"),l=n("59b2"),u=n("b50f"),h=(n("cea0"),n("d386")),p=n("ce0b"),d=(n("e06a"),n("7ffa")),b=n("8048"),f=n("b48e"),m=n("ea51"),g=n("32ed"),y=n("7f83"),O=n("a29a"),v=n("f7eb"),j=n("04f0"),x=n("b139"),_=n("e431"),w=n("0b2d"),M=n("4ae5");function S(t,e,n=null){return Object(c["l"])(n)?[t,e,n]:[t,e]}function T(t,e,n=null){return Object(c["l"])(n)?{x:t,y:e,z:n}:{x:t,y:e}}class V{constructor(t){this.spatialReference=t}mapToLocalMultiple(t){return Object(c["h"])(t.map(t=>this.mapToLocal(t)))}get doUnnormalization(){return!1}}class E extends V{constructor(t,e,n=null){super(e),this.defaultZ=n,this.transform=Object(v["b"])(),this.transformInv=Object(v["b"])(),this.transform=Object(v["a"])(t),Object(O["a"])(this.transformInv,this.transform)}makeMapPoint(t,e){return S(t,e,this.defaultZ)}mapToLocal(t){return T(this.transform[0]*t[0]+this.transform[2]*t[1]+this.transform[4],this.transform[1]*t[0]+this.transform[3]*t[1]+this.transform[5])}localToMap(t){return S(this.transformInv[0]*t.x+this.transformInv[2]*t.y+this.transformInv[4],this.transformInv[1]*t.x+this.transformInv[3]*t.y+this.transformInv[5],this.defaultZ)}}class C extends V{constructor(t,e){super(t.spatialReference),this.view=t,this.defaultZ=null,this.pWS=Object(w["f"])(),this.tangentFrameUpWS=Object(w["f"])(),this.tangentFrameRightWS=Object(w["f"])(),this.tangentFrameForwardWS=Object(w["f"])(),this.localFrameRightWS=Object(w["f"])(),this.localFrameUpWS=Object(w["f"])(),this.worldToLocalTransform=Object(x["b"])(),this.localToWorldTransform=Object(x["b"])(),this.scale=1,this.scale=t.resolution,this.referenceMapPoint=e,this.defaultZ=e.hasZ?e.z:null;const n=t.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,0,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,1,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,2,this.tangentFrameForwardWS);const i=Object(w["f"])();Object(_["e"])(i,this.tangentFrameForwardWS,Object(_["h"])(n,this.tangentFrameForwardWS)),Object(_["j"])(this.localFrameRightWS,n,i),Object(_["r"])(this.localFrameRightWS,this.localFrameRightWS),Object(_["g"])(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),Object(j["g"])(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),Object(j["c"])(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return"global"===this.view.viewingMode}makeMapPoint(t,e){return S(t,e,this.defaultZ)}mapToLocal(t){const e=Object(w["f"])();this.view.renderCoordsHelper.toRenderCoords(new M["a"]({x:t[0],y:t[1],spatialReference:this.spatialReference}),e),Object(_["u"])(e,e,this.worldToLocalTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(e,this.view.spatialReference);return Object(c["l"])(n)?T(n.x/this.scale,n.y/this.scale):null}localToMap(t){const e=Object(w["f"])();this.view.renderCoordsHelper.toRenderCoords(new M["a"]({x:t.x*this.scale,y:t.y*this.scale,spatialReference:this.spatialReference}),e),Object(_["u"])(e,e,this.localToWorldTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(e,this.view.spatialReference);return Object(c["l"])(n)?S(n.x,n.y,this.defaultZ):null}}function I(t,e){if("2d"===t.type)return new E(t.state.transform,t.spatialReference,e.length>2?e[2]:null);if("3d"===t.type){const n=e.length>2?new M["a"]({x:e[0],y:e[1],z:e[2],spatialReference:t.spatialReference}):new M["a"]({x:e[0],y:e[1],spatialReference:t.spatialReference});return new C(t,n)}return null}var P=n("57dc"),k=n("521c"),R=n("1219");function z(t,e){const n=new M["a"]({x:t[0],y:t[1],spatialReference:e});return t.length>2&&(n.z=t[2]),n}function G(t,e){return new P["a"]({points:t,spatialReference:e})}function A(t,e,n){const i=new k["a"]({paths:t,spatialReference:e});return n&&Object(g["i"])(i),i}function L(t,e,n,i=!0){const r=Object(d["a"])(t);r.forEach(t=>{const e=t[0],n=t[t.length-1];Object(u["c"])(e,n)&&1!==t.length||t.push(t[0])});let a=new R["a"]({rings:r,spatialReference:e});return a.rings.forEach(t=>{Object(g["g"])(t,!1,!1)||t.reverse()}),n&&Object(g["i"])(a),i&&a.isSelfIntersecting&&Object(y["l"])(e)&&(a=Object(m["simplify"])(a)),a}function D(t,e,n){const i=e.mapToLocalMultiple(t),r=[],a={x:i[0].x,y:i[0].y},s={x:i[1].x,y:i[1].y},o=Math.round(s.x-a.x),l=Math.round(s.y-a.y),u=Math.max(Math.abs(o),Math.abs(l));if(n){const t={x:a.x+u,y:a.y+u},e={x:a.x-u,y:a.y-u};r.push(T(t.x,e.y),T(e.x,e.y),T(e.x,t.y),T(t.x,t.y))}else{const t={x:o>0?a.x+u:a.x-u,y:l>0?a.y+u:a.y-u};r.push(T(a.x,a.y),T(t.x,a.y),T(t.x,t.y),T(a.x,t.y))}return L([Object(c["h"])(r.map(t=>e.localToMap(t)))],e.spatialReference,e.doUnnormalization,!0)}function F(t,e,n){let i=e.mapToLocalMultiple(t);if(1===i.length){const t=48,e=i[0];i=[T(e.x-t,e.y+t),T(e.x+t,e.y-t),T(e.x+t,e.y-t),T(e.x-t,e.y+t)]}const r=[],a={x:i[0].x,y:i[0].y},s={x:i[1].x,y:i[1].y};if(n){const t=Math.round(s.x-a.x),e=Math.round(s.y-a.y);r.push(T(a.x-t,a.y-e),T(s.x,a.y-e),T(s.x,s.y),T(a.x-t,s.y))}else r.push(T(a.x,a.y),T(s.x,a.y),T(s.x,s.y),T(a.x,s.y));return L([Object(c["h"])(r.map(t=>e.localToMap(t)))],e.spatialReference,e.doUnnormalization,!0)}function H(t,e,n,i){const r=e.mapToLocalMultiple(t);let a=null,s=null;if(n)a=r[0],s=r[1];else{const t=r[0],e=r[1],n=Math.round(e.x-t.x),i=Math.round(e.y-t.y),o=Math.max(Math.abs(n),Math.abs(i));a=T(n>0?t.x+o/2:t.x-o/2,i>0?t.y+o/2:t.y-o/2),s=T(Math.abs(n)>Math.abs(i)?a.x-o/2:a.x,Math.abs(n)>Math.abs(i)?a.y:a.y-o/2)}const o=e.localToMap(a),l=e.localToMap(s);if(Object(c["k"])(o)||Object(c["k"])(l))return null;e.doUnnormalization&&Object(g["j"])([[o,l]],e.spatialReference);const u=z(o,e.spatialReference),h=z(l,e.spatialReference),p=Object(b["d"])(e.spatialReference);let d=0;if(Object(y["l"])(e.spatialReference))d=p*Object(m["distance"])(u,h,null);else{const t=a.x-s.x,e=a.y-s.y;d=p*Math.sqrt(t*t+e*e)*(i||1)}const O=new f["a"]({center:u,radius:d,radiusUnit:"meters",spatialReference:e.spatialReference});return L(O.rings,O.spatialReference,!1)}function Z(t,e,n){const i=e.mapToLocalMultiple(t),r=i[0],a=i[1],s=Math.round(a.x-r.x),o=Math.round(a.y-r.y),l=T(n?r.x:r.x+s/2,n?r.y:r.y+o/2),u=n?s:s/2,h=n?o:o/2,p=60,d=[],b=2*Math.PI/p;for(let c=0;c<p;c++){const t=Math.cos(c*b),e=Math.sin(c*b),n=T(u*t+l.x,h*e+l.y);d.push(n)}return d.push(d[0]),L([Object(c["h"])(d.map(t=>e.localToMap(t)))],e.spatialReference,e.doUnnormalization,!1)}var U=n("4772");let W=class extends(Object(s["b"])(a["a"].EventedMixin(U["a"]))){constructor(t){super(t),this._graphic=null,this.defaultZ=0,this.geometryType=null,this.hasZ=!0,this.mode=null,this.snappingManager=null,this.snapToScene=!1}initialize(){this.internalGraphicsLayer=new p["a"]({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer),this.drawOperation=this.makeDrawOperation(),this.handles.add([this.drawOperation.on("vertex-add",t=>this.onVertexAdd(t)),this.drawOperation.on("vertex-remove",t=>this.onVertexRemove(t)),this.drawOperation.on("vertex-update",t=>this.onVertexUpdate(t)),this.drawOperation.on("cursor-update",t=>this.onCursorUpdate(t)),this.drawOperation.on("complete",t=>this.onComplete(t))]),this.complete()}destroy(){this.drawOperation=Object(c["e"])(this.drawOperation),this._destroyAllVisualisations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=Object(c["e"])(this.internalGraphicsLayer),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centered(t){this._set("centered",t),this._updateGraphic()}set enabled(t){this.drawOperation.interactive=t,this._set("enabled",t)}set forceUniformSize(t){this._set("forceUniformSize",t),this._updateGraphic()}get graphic(){return this._graphic}set graphicSymbol(t){this._set("graphicSymbol",t),Object(c["l"])(this._graphic)&&(this._graphic.symbol=t)}get updating(){var t,e;return null!=(t=null==(e=this.drawOperation)?void 0:e.updating)&&t}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(t){this.drawOperation.onInputEvent(t)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo()}_createGraphic(t){this._graphic=new r["a"]({geometry:t,symbol:this.graphicSymbol}),this.internalGraphicsLayer.add(this._graphic),this.handles.add(this.initializeGraphic(this._graphic)),this.notifyChange("graphic"),this.handles.add(Object(o["c"])(()=>{Object(c["l"])(this._graphic)&&(this.internalGraphicsLayer.remove(this._graphic),this._graphic=Object(c["e"])(this._graphic))}),q)}_destroyAllVisualisations(){this.handles.remove(B.outline),this.handles.remove(B.regularVertices),this.handles.remove(B.activeVertex),this.handles.remove(q)}_getCreateOperationGeometry(t={operationComplete:!1}){if(null==this.drawOperation||0===this.drawOperation.numVertices)return null;const e=this.drawOperation.stagedVertex,n=this.drawOperation.committedVertices,i=n.slice();Object(c["l"])(e)&&i.push(this.drawOperation.coordinateHelper.pointToArray(e));const r=Object(c["l"])(e)?this.drawOperation.coordinateHelper.pointToArray(e):n.splice(-1)[0],a={regularVertices:null,activeVertex:null,full:null,outline:null},s=i.length,o=this.drawOperation.spatialReference,l="3d"===this.view.type&&"global"===this.view.viewingMode;switch(this.geometryType){case"point":a.regularVertices=n,a.activeVertex=r,a.full=this.drawOperation.coordinateHelper.arrayToPoint(i[0]);break;case"multipoint":a.regularVertices=n,a.activeVertex=r,s>0&&(a.full=G(i,o));break;case"polyline":a.regularVertices=n,a.activeVertex=r,s>0&&(a.full=A([i],o,l));break;case"polygon":a.regularVertices=n,a.activeVertex=r,s>0&&(a.full=L([i],o,l,!0));break;case"circle":if(s>0){const e=I(this.view,i[0]);if(1===s&&t.operationComplete){const t=i[0],n=e.makeMapPoint(t[0]+Y*this.view.resolution,t[1]);a.full=H([t,n],e,!0)}else 2===s&&(a.full=this.forceUniformSize?H(i,e,this.centered):Z(i,e,this.centered))}break;case"rectangle":if(s>0){const e=I(this.view,i[0]);if(1===s&&t.operationComplete){const t=i[0],n=e.makeMapPoint(t[0]+Y*this.view.resolution,t[1]);a.full=D([t,n],e,!0)}else 2===s&&(a.full=this.forceUniformSize?D(i,e,this.centered):F(i,e,this.centered))}break;default:return null}switch(this.geometryType){case"point":case"multipoint":break;case"polyline":case"polygon":s>1&&(a.outline=A([i],o,l));break;case"circle":case"rectangle":Object(c["l"])(a.full)&&"polygon"===a.full.type&&(a.outline=L(a.full.rings,o,l))}return a}initializeGraphic(t){return null}onComplete(t){this._updateGraphic();let e=null;if(this.drawOperation.isCompleted){const t=this._getCreateOperationGeometry({operationComplete:!0});Object(c["l"])(t)&&(e=new r["a"]({geometry:t.full,symbol:this.graphicSymbol,sourceLayer:this.internalGraphicsLayer,...this.graphicProperties}))}this.emit("complete",{graphic:e,...t})}onCursorUpdate(t){this._updateGraphic(),this.emit("cursor-update",t)}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}onVertexAdd(t){this._updateGraphic(),this.emit("vertex-add",t)}onVertexRemove(t){this._updateGraphic(),this.emit("vertex-remove",t)}onVertexUpdate(t){this._updateGraphic(),this.emit("vertex-update",t)}_updateGraphic(){const t=this._getCreateOperationGeometry();Object(c["k"])(t)?this._destroyAllVisualisations():(Object(c["l"])(t.outline)?this.handles.add(this.onOutlineChanged(t.outline),B.outline):this.handles.remove(B.outline),Object(c["l"])(t.regularVertices)?this.handles.add(this.onRegularVerticesChanged(t.regularVertices),B.regularVertices):this.handles.remove(B.regularVertices),Object(c["l"])(t.activeVertex)?this.handles.add(this.onActiveVertexChanged(t.activeVertex),B.activeVertex):this.handles.remove(B.activeVertex),Object(c["l"])(t.full)?Object(c["k"])(this._graphic)?this._createGraphic(t.full):this._graphic.geometry=t.full:this.handles.remove(q))}};Object(i["a"])([Object(l["b"])({value:!0})],W.prototype,"centered",null),Object(i["a"])([Object(l["b"])({nonNullable:!0})],W.prototype,"defaultZ",void 0),Object(i["a"])([Object(l["b"])()],W.prototype,"drawOperation",void 0),Object(i["a"])([Object(l["b"])({value:!0})],W.prototype,"enabled",null),Object(i["a"])([Object(l["b"])({value:!0})],W.prototype,"forceUniformSize",null),Object(i["a"])([Object(l["b"])({constructOnly:!0})],W.prototype,"geometryType",void 0),Object(i["a"])([Object(l["b"])()],W.prototype,"graphic",null),Object(i["a"])([Object(l["b"])({constructOnly:!0})],W.prototype,"graphicProperties",void 0),Object(i["a"])([Object(l["b"])()],W.prototype,"graphicSymbol",null),Object(i["a"])([Object(l["b"])({constructOnly:!0})],W.prototype,"hasZ",void 0),Object(i["a"])([Object(l["b"])({constructOnly:!0})],W.prototype,"mode",void 0),Object(i["a"])([Object(l["b"])()],W.prototype,"snappingManager",void 0),Object(i["a"])([Object(l["b"])()],W.prototype,"snapToScene",void 0),Object(i["a"])([Object(l["b"])({readOnly:!0})],W.prototype,"type",void 0),Object(i["a"])([Object(l["b"])({readOnly:!0})],W.prototype,"updating",null),Object(i["a"])([Object(l["b"])({constructOnly:!0,nonNullable:!0})],W.prototype,"view",void 0),W=Object(i["a"])([Object(h["a"])("esri.views.draw.DrawGraphicTool")],W);const q="create-operation-graphic",B={outline:"outline-visual",regularVertices:"regular-vertices-visual",activeVertex:"active-vertex-visual"};function N(t){switch(t){case"point":case"polyline":case"polygon":case"multipoint":return t;case"circle":case"rectangle":return"segment";default:return null}}const Y=48},afe1:function(t,e,n){"use strict";function i(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function a(t,e,n,i,r,a,s,o,c,l,u,h,p,d,b,f){return[t,e,n,i,r,a,s,o,c,l,u,h,p,d,b,f]}function s(t,e){return new Float64Array(t,e,16)}n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return a}));const o=i();Object.freeze({__proto__:null,create:i,clone:r,fromValues:a,createView:s,IDENTITY:o})},b139:function(t,e,n){"use strict";function i(){return[0,0,0,1]}function r(t){return[t[0],t[1],t[2],t[3]]}function a(t,e,n,i){return[t,e,n,i]}function s(t,e){return new Float64Array(t,e,4)}n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return s}));const o=i();Object.freeze({__proto__:null,create:i,clone:r,fromValues:a,createView:s,IDENTITY:o})},c20d:function(t,e,n){"use strict";n.d(e,"a",(function(){return S})),n.d(e,"b",(function(){return _})),n.d(e,"c",(function(){return w})),n.d(e,"d",(function(){return p})),n.d(e,"e",(function(){return h})),n.d(e,"f",(function(){return M})),n.d(e,"g",(function(){return d})),n.d(e,"h",(function(){return y})),n.d(e,"i",(function(){return v})),n.d(e,"j",(function(){return x}));n("c649");var i=n("7ffa"),r=n("38a4"),a=n("b2b2"),s=n("a915"),o=n("0b2d"),c=n("8188"),l=n("cdc1");function u(t,e){let n=null,i=null;return r=>{if("cancel"===r.action)return void(Object(a["l"])(i)&&(i.execute({action:"cancel"}),n=null,i=null));const s={action:r.action,screenStart:r.start,screenEnd:r.screenPoint};"start"===r.action&&Object(a["k"])(n)&&(n=new S,i=new S,e(t,n,i,r.pointerType,s)),Object(a["l"])(n)&&n.execute(s),"end"===r.action&&Object(a["l"])(n)&&(n=null,i=null)}}function h(t,e){return t.events.on("drag",u(t,e))}function p(t,e){const n=[t.x,t.y,t.z],i=e,r=[Math.cos(i),Math.sin(i)],a=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(0===a)return null;r[0]/=a,r[1]/=a;const s=t=>{const e=(t.x-n[0])*r[0]+(t.y-n[1])*r[1];t.x=n[0]+e*r[0],t.y=n[1]+e*r[1]};return t=>(s(t.mapStart),s(t.mapEnd),t)}function d(t,e){let n=null;return i=>{if("start"===i.action&&(n=f(t,i.mapStart.spatialReference,e)),Object(a["k"])(n))return null;const r=i.mapEnd.x-i.mapStart.x,s=i.mapEnd.y-i.mapStart.y,o=i.mapEnd.z-i.mapStart.z;return n.move(r,s,o),{...i,translationX:r,translationY:s,translationZ:o}}}function b(t,e){return Object(a["k"])(t)?null:t.spatialReference.equals(e)?t.clone():Object(c["i"])(t,e)}function f(t,e,n){const i=t.geometry;if(Object(a["k"])(i))return null;if("mesh"===i.type)return m(t,i,e,n);const r=b(i,e),s=i.spatialReference;return Object(a["k"])(r)?null:{move:(e,n,i)=>{const a=Object(l["d"])(r.clone(),e,n,i);a.spatialReference.equals(s)?t.geometry=a:t.geometry=Object(c["i"])(a,s)}}}function m(t,e,n,i){if(Object(a["l"])(e.transform))return g(t,e,e.transform,n);if(!e.spatialReference.equals(n))return null;let r=0,s=0,o=0;return{move:(n,a,c)=>{const l=n-r,u=a-s,h=c-o;if(l||u||h){const p=e.origin.clone().offset(l,u,h);e.centerAt(p,{geographic:1===i}),t.notifyGeometryChanged(),r=n,s=a,o=c}}}}function g(t,e,n,i){const r=b(n.getOriginPoint(e.spatialReference),i),s=e.spatialReference;return Object(a["k"])(r)?null:{move:(e,i,u)=>{const h=Object(l["d"])(r.clone(),e,i,u);if(h.spatialReference.equals(s))n.origin=Object(o["h"])(h.x,h.y,h.z);else{const t=Object(c["i"])(h,s);Object(a["l"])(t)&&(n.origin=Object(o["h"])(t.x,t.y,t.z))}t.notifyGeometryChanged()}}}function y(t,e){const n=t.map(t=>Object(a["t"])(d(t,e))).filter(t=>Object(a["l"])(t));return t=>{const e=t.mapEnd.x-t.mapStart.x,i=t.mapEnd.y-t.mapStart.y,r=t.mapEnd.z-t.mapStart.z;return n.forEach(e=>e(t)),{...t,translationX:e,translationY:i,translationZ:r}}}function O(t,e){const n=new Map;for(const r of e)n.set(r,Object(i["a"])(t[r]));return e=>(n.forEach((e,n)=>{t[n]=e}),e)}function v(t){return Object(a["l"])(t.geometry)&&"mesh"===t.geometry.type?j(t,t.geometry):O(t,["geometry"])}function j(t,e){const n=Object(a["l"])(e.transform)?e.transform.clone():null,i=e.vertexAttributes.clonePositional();return r=>(e.transform=n,e.vertexAttributes=i,t.notifyGeometryChanged(),r)}function x(t){const e=t.map(t=>Object(a["t"])(v(t))).filter(t=>Object(a["l"])(t));return t=>(e.forEach(e=>e(t)),t)}function _(){let t=0,e=0,n=0;return i=>{"start"===i.action&&(t=i.mapStart.x,e=i.mapStart.y,n=i.mapStart.z);const r=i.mapEnd.x-t,a=i.mapEnd.y-e,s=i.mapEnd.z-n;return t=i.mapEnd.x,e=i.mapEnd.y,n=i.mapEnd.z,{...i,mapDeltaX:r,mapDeltaY:a,mapDeltaZ:s,mapDeltaSpatialReference:i.mapStart.spatialReference}}}function w(){let t=0,e=0;return n=>{"start"===n.action&&(t=n.screenStart.x,e=n.screenStart.y);const i=n.screenEnd.x-t,r=n.screenEnd.y-e;return t=n.screenEnd.x,e=n.screenEnd.y,{...n,screenDeltaX:i,screenDeltaY:r}}}function M(t,e){let n=null,i=0,a=0;return o=>{if("start"===o.action&&(n=t.toScreen(e),n.x<0||n.x>t.width||n.y<0||n.y>t.height?n=null:(i=o.screenStart.x-n.x,a=o.screenStart.y-n.y)),null==n)return null;const c=Object(r["d"])(o.screenEnd.x-i,0,t.width),l=Object(r["d"])(o.screenEnd.y-a,0,t.height),u=Object(s["e"])(c,l);return o.screenStart=n,o.screenEnd=u,o}}class S{constructor(){this.execute=()=>{}}next(t,e=new S){return Object(a["l"])(t)&&(this.execute=n=>{const i=t(n);Object(a["l"])(i)&&e.execute(i)}),e}}},d18f:function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return p})),n.d(e,"e",(function(){return u})),n.d(e,"f",(function(){return h})),n.d(e,"g",(function(){return c}));n("b50f");var i=n("2119"),r=n("e431"),a=n("0b2d"),s=n("7361");function o(t){return t?{origin:Object(a["d"])(t.origin),direction:Object(a["d"])(t.direction)}:{origin:Object(a["f"])(),direction:Object(a["f"])()}}function c(t,e){const n=f.get();return n.origin=t,n.direction=e,n}function l(t,e=o()){return h(t.origin,t.direction,e)}function u(t,e,n=o()){return Object(r["k"])(n.origin,t),Object(r["j"])(n.direction,e,t),n}function h(t,e,n=o()){return Object(r["k"])(n.origin,t),Object(r["k"])(n.direction,e),n}function p(t,e){const n=Object(r["g"])(s["d"].get(),Object(r["r"])(s["d"].get(),t.direction),Object(r["j"])(s["d"].get(),e,t.origin));return Object(r["h"])(n,n)}function d(t,e,n){const i=Object(r["h"])(t.direction,Object(r["j"])(n,e,t.origin));return Object(r["f"])(n,t.origin,Object(r["e"])(n,t.direction,i)),n}function b(){return{origin:null,direction:null}}const f=new i["a"](b)},dae5:function(t,e,n){"use strict";function i(){return[1,0,0,0,1,0,0,0,1]}function r(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function a(t,e,n,i,r,a,s,o,c){return[t,e,n,i,r,a,s,o,c]}function s(t,e){return new Float64Array(t,e,9)}n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return i}));Object.freeze({__proto__:null,create:i,clone:r,fromValues:a,createView:s})},e7e3:function(t,e,n){"use strict";n.d(e,"a",(function(){return x}));var i=n("a4ee"),r=n("ce6d"),a=n("9096"),s=n("7ffa"),o=n("b2b2"),c=n("f4cc"),l=n("a915"),u=n("59b2"),h=(n("cea0"),n("d386")),p=n("3563");class d{constructor({grabbableForEvent:t}){this.events=new r["a"],this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.grabbableForEvent=t}intersectionDistance(t,e){return 0}attach(){}detach(){}}const b="click";var f=n("8b1a"),m=n("c20d"),g=n("6ae9"),y=n("2c8f"),O=n("1f1c"),v=n("8a19"),j=n("9305");let x=class extends(r["a"].EventedMixin(a["a"])){constructor(t){super(t),this._createOperationCompleted=!1,this._pointerDownStates=new Set,this._snappingPipeline=new v["a"],this._snappingTask=null,this._stagedVertex=null,this.snapToSceneEnabled=null,Object(o["k"])(t.elevationInfo)&&(this.elevationInfo={mode:t.hasZ?"absolute-height":"on-the-ground",offset:0})}initialize(){var t,e;this.coordinateHelper=Object(f["a"])(this.hasZ,this.hasM,this.view.spatialReference);const n="3d"===this.view.type?null==(t=this.view)||null==(e=t.resourceController)?void 0:e.scheduler:null;this._frameTask=n?n.registerTask(j["b"].SNAPPING):j["a"];const i="viewingMode"in this.view.state?this.view.state.viewingMode:2,r="segment"===this.geometryType||"multipoint"===this.geometryType?"polyline":this.geometryType;this._editGeometryOperations=new y["a"](new g["c"](r,this.coordinateHelper,i)),this._activeComponent=new g["a"](this.spatialReference,i),this._editGeometryOperations.data.components.push(this._activeComponent),this.handles.add(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],t=>{const e=t.vertices.map(t=>({componentIndex:0,vertexIndex:t.index,coordinates:this.coordinateHelper.vectorToArray(t.pos)})),n=e.map(t=>t.coordinates);switch(t.type){case"vertex-add":this.emit(t.type,{...t,added:n,vertices:e});break;case"vertex-update":this.emit(t.type,{...t,updated:n,vertices:e});break;case"vertex-remove":this.emit(t.type,{...t,removed:n,vertices:e})}})),this._manipulator=new d({grabbableForEvent:t=>"click"!==this.drawingMode||"touch"===t.pointerType&&this._snappingEnabled&&1===this._pointerDownStates.size}),this.manipulators.add(this._manipulator),this._manipulator.grabbable="point"!==this.geometryType,this.handles.add([this._createManipulatorDragPipeline(this._manipulator),this._manipulator.events.on("immediate-click",t=>this._onImmediateClick(t)),this._manipulator.events.on("immediate-double-click",t=>this._onImmediateDoubleClick(t))])}destroy(){this._editGeometryOperations=Object(o["e"])(this._editGeometryOperations),this._frameTask=Object(o["s"])(this._frameTask)}get _snappingEnabled(){return Object(o["l"])(this.snappingManager)&&this.snappingManager.options.effectiveEnabled}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map(t=>this.coordinateHelper.vectorToArray(t.pos))}set drawingMode(t){this._set("drawingMode",null!=t?t:b)}get hasStagedVertex(){return Object(o["l"])(this._stagedVertex)}get interactive(){return this._manipulator.interactive}set interactive(t){this._manipulator.interactive=t}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get numVertices(){return Object(o["l"])(this._stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}get spatialReference(){return this.view.spatialReference}get stagedVertex(){return this._stagedVertex}set stagedVertex(t){if(Object(o["k"])(t))this.discardStagedVertex();else if(!Object(o["l"])(this._stagedVertex)||!Object(p["a"])(this._stagedVertex,t)){if(Object(o["k"])(this._stagedVertex))this._stagedVertex=Object(s["a"])(t);else{if(Object(p["a"])(this._stagedVertex,t))return;this._stagedVertex.x=t.x,this._stagedVertex.y=t.y,this._stagedVertex.z=t.z,this._stagedVertex.m=t.m,this._stagedVertex.hasZ=t.hasZ,this._stagedVertex.hasM=t.hasM,this._stagedVertex.spatialReference=t.spatialReference}this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(t)}],operation:"apply",type:"vertex-update"})}}get updating(){return this.updatingHandles.updating}get vertices(){const t=this.committedVertices;return Object(o["l"])(this._stagedVertex)&&t.push(this.coordinateHelper.pointToArray(this._stagedVertex)),t}cancel(){this.complete({aborted:!0})}commitStagedVertex(){if(this._snappingTask=Object(o["a"])(this._snappingTask),Object(o["l"])(this._stagedVertex)){const t=this._stagedVertex;this._stagedVertex=null,this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(t))}}complete(t){const e=t&&t.aborted||!1;Object(o["a"])(this._snappingTask),Object(o["l"])(this.snappingManager)&&this.snappingManager.doneSnapping(),"segment"===this.geometryType||"point"===this.geometryType?this.commitStagedVertex():this.discardStagedVertex();const n="multipoint"===this.geometryType&&0===this.numVertices||"polyline"===this.geometryType&&this.numVertices<2||"polygon"===this.geometryType&&this.numVertices<3;this._createOperationCompleted=!n,(this.isCompleted||e)&&this.emit("complete",{vertices:this.vertices.map((t,e)=>({componentIndex:0,vertexIndex:e,coordinates:t})),aborted:e,type:"complete"})}discardStagedVertex(){this._stagedVertex=null}onInputEvent(t){switch(t.type){case"pointer-down":this._pointerDownStates.add(t.pointerId);break;case"pointer-up":this._pointerDownStates.delete(t.pointerId)}switch(t.type){case"pointer-move":return this._onPointerMove(t);case"hold":return this._onHold(t)}}redo(){this._editGeometryOperations.redo()}undo(){Object(o["l"])(this.snappingManager)&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_closeOnClickVertexIndex(t){const e=this._activeComponent;if("polygon"===this.geometryType&&e.vertices.length>2){if(this._vertexWithinPointerDistance(e.vertices[0].pos,t))return 0;if(this._vertexWithinPointerDistance(e.vertices[e.vertices.length-1].pos,t))return e.vertices.length-1}return null}_createManipulatorDragPipeline(t){switch(this.drawingMode){case"click":return this._createManipulatorDragPipelineClick(t);case"freehand":return this._createManipulatorDragPipelineFreehand(t);case"hybrid":return this._createManipulatorDragPipelineHybrid(t)}}_createManipulatorDragPipelineClick(t){return Object(m["e"])(t,(t,e,n,i)=>{const r="touch"===i&&this._snappingEnabled;!this.isCompleted&&r&&(e.next(this._screenToMapDragEventStep()).next(t=>("start"===t.action&&(this.stagedVertex=t.mapStart,("segment"===this.geometryType||r&&0===this.numVertices)&&this.commitStagedVertex()),t)).next(this._snappingPipeline.createSnapDragEventPipelineStep({predicate:()=>r,cancel:n,snappingManager:this.snappingManager,snappingContext:new O["a"]({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:i,visualizer:this.snappingVisualizer}),updatingHandles:this.updatingHandles}),this._snappingPipeline.next).next(t=>(r&&(this.stagedVertex=t.mapEnd,"end"===t.action&&this.commitStagedVertex()),t)).next(t=>("end"===t.action&&("segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()),t)),n.next(()=>{r&&Object(o["l"])(this.snappingManager)&&this.snappingManager.doneSnapping()}))})}_createManipulatorDragPipelineFreehand(t){return Object(m["e"])(t,(t,e)=>{this.isCompleted||e.next(this._screenToMapDragEventStep()).next(t=>("start"===t.action&&(Object(o["k"])(this.stagedVertex)&&(this.stagedVertex=t.mapStart),"segment"===this.geometryType&&this.commitStagedVertex()),t)).next(t=>{switch(t.action){case"start":case"update":this.stagedVertex=t.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":this.complete()}return t})})}_createManipulatorDragPipelineHybrid(t){return Object(m["e"])(t,(t,e)=>{this.isCompleted||e.next(this._screenToMapDragEventStep()).next(t=>("start"===t.action&&(Object(o["k"])(this.stagedVertex)&&(this.stagedVertex=t.mapStart),this.commitStagedVertex()),t)).next(t=>{switch(t.action){case"start":case"update":this.stagedVertex=t.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()}return t})})}_getDrawSurface(){if(Object(o["k"])(this.elevationDrawSurface))return this.drawSurface;if(!this.coordinateHelper.hasZ)return this.elevationDrawSurface.defaultZ=null,this.elevationDrawSurface;let t=this.defaultZ,e=!1;Object(o["l"])(this.elevationInfo)&&"absolute-height"===this.elevationInfo.mode&&(e=!0),Object(o["l"])(this.snapToSceneEnabled)&&(e=this.snapToSceneEnabled),Object(o["l"])(this.elevationInfo)&&"on-the-ground"===this.elevationInfo.mode&&(e=!1);const n=this._activeComponent.vertices.length;return("segment"===this.geometryType||"polygon"===this.geometryType)&&n>0&&(t=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),e=!1),e?this.drawSurface:(this.elevationDrawSurface.defaultZ=t,this.elevationDrawSurface)}_mapToScreen(t){return this._getDrawSurface().mapToScreen(t)}_onHold(t){Object(o["a"])(this._snappingTask),"click"===this.drawingMode&&"touch"===t.pointerType&&this._snappingEnabled&&(this.stagedVertex=t.mapPoint),t.stopPropagation()}_onImmediateClick(t){if("mouse"===t.pointerType&&2===t.button||this._manipulator.dragging)return;const e=this._activeComponent,n=this._closeOnClickVertexIndex(t.screenPoint);if(Object(o["l"])(n))return t.stopPropagation(),this.discardStagedVertex(),void this.complete();const i=this._screenToMap(t.screenPoint);if(Object(o["l"])(i))switch(this.drawingMode){case"freehand":"point"===this.geometryType&&(this.hasStagedVertex?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(i)),this.complete());break;case"click":case"hybrid":this._snappingTask=Object(o["a"])(this._snappingTask),this.hasStagedVertex?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(i)),("point"===this.geometryType||"segment"===this.geometryType&&2===e.vertices.length||"segment"===this.geometryType&&"hybrid"===this.drawingMode&&1===e.vertices.length)&&this.complete()}t.stopPropagation()}_onImmediateDoubleClick(t){this._manipulator.dragging||"point"===this.geometryType||(this.complete(),t.stopPropagation())}_onPointerMove(t){if(Object(o["a"])(this._snappingTask),this._manipulator.dragging||this._pointerDownStates.has(t.pointerId)||this._manipulator.grabbing||!this._manipulator.interactive)return;const e=Object(l["e"])(t.x,t.y),n=this._closeOnClickVertexIndex(e);if(Object(o["l"])(n)){this.discardStagedVertex();const t={componentIndex:0,vertexIndex:n,coordinates:this.coordinateHelper.vectorToArray(this._activeComponent.vertices[n].pos)};this.emit("cursor-update",{updated:null,vertices:[t],operation:"apply",type:"vertex-update"})}else{const n=this._screenToMap(e);if(this._manipulator.cursor=Object(o["l"])(n)?"crosshair":null,Object(o["l"])(n))if(Object(o["l"])(this.snappingManager)){const e=this.snappingManager,i=new O["a"]({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:t.pointerType,visualizer:this.snappingVisualizer});this.stagedVertex=e.update(n,i),this._snappingTask=Object(c["g"])(async t=>{const r=await this._frameTask.schedule(()=>e.snap(n,i,t),t);r.valid&&await this._frameTask.schedule(()=>{this.stagedVertex=r.apply()},t)}),this.updatingHandles.addPromise(this._snappingTask.promise)}else this.stagedVertex=n}t.stopPropagation()}_screenToMap(t){return this._getDrawSurface().screenToMap(t)}_screenToMapDragEventStep(){let t=null;return e=>{if("start"===e.action&&(t=this._screenToMap(e.screenStart)),Object(o["k"])(t))return null;const n=this._screenToMap(e.screenEnd);return Object(o["l"])(n)?{...e,mapStart:t,mapEnd:n}:null}}_vertexWithinPointerDistance(t,e){const n=25,i=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(t));return!!Object(o["l"])(i)&&_(i,e,n)}};function _(t,e,n){const i=t.x-e.x,r=t.y-e.y;return i*i+r*r<=n}Object(i["a"])([Object(u["b"])()],x.prototype,"defaultZ",void 0),Object(i["a"])([Object(u["b"])({value:b})],x.prototype,"drawingMode",null),Object(i["a"])([Object(u["b"])({constructOnly:!0})],x.prototype,"elevationDrawSurface",void 0),Object(i["a"])([Object(u["b"])({constructOnly:!0})],x.prototype,"elevationInfo",void 0),Object(i["a"])([Object(u["b"])({constructOnly:!0})],x.prototype,"geometryType",void 0),Object(i["a"])([Object(u["b"])({constructOnly:!0})],x.prototype,"hasM",void 0),Object(i["a"])([Object(u["b"])({constructOnly:!0})],x.prototype,"hasZ",void 0),Object(i["a"])([Object(u["b"])({constructOnly:!0})],x.prototype,"manipulators",void 0),Object(i["a"])([Object(u["b"])({constructOnly:!0})],x.prototype,"drawSurface",void 0),Object(i["a"])([Object(u["b"])({constructOnly:!0})],x.prototype,"snappingManager",void 0),Object(i["a"])([Object(u["b"])({constructOnly:!0})],x.prototype,"snappingVisualizer",void 0),Object(i["a"])([Object(u["b"])()],x.prototype,"snapToSceneEnabled",void 0),Object(i["a"])([Object(u["b"])({readOnly:!0})],x.prototype,"updating",null),Object(i["a"])([Object(u["b"])({constructOnly:!0})],x.prototype,"view",void 0),x=Object(i["a"])([Object(h["a"])("esri.views.draw.DrawOperation")],x)},f0b9:function(t,e,n){"use strict";function i(t){return 32+t.length}function r(){return 16}function a(t){if(!t)return 0;let e=32;for(const n in t)if(t.hasOwnProperty(n)){const a=t[n];switch(typeof a){case"string":e+=i(a);break;case"number":e+=r();break;case"boolean":e+=4}}return e}function s(t,e){return 32+t.length*e}n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s}))},f895:function(t,e,n){"use strict";n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return _})),n.d(e,"e",(function(){return x})),n.d(e,"f",(function(){return V})),n.d(e,"g",(function(){return H})),n.d(e,"h",(function(){return y}));n("c120");var i=n("e92d"),r=n("38a4"),a=n("b2b2"),s=n("d791"),o=n("e431"),c=n("0b2d"),l=n("7577"),u=n("0fc4"),h=n("d18f"),p=n("a1b1"),d=n("7361");const b=i["a"].getLogger("esri.geometry.support.sphere");function f(){return Object(u["e"])()}function m(t,e=f()){return Object(l["c"])(e,t)}function g(t,e){return Object(u["g"])(t[0],t[1],t[2],e)}function y(t){return t}function O(t){t[0]=t[1]=t[2]=t[3]=0}function v(t){return t}function j(t){return Array.isArray(t)?t[3]:t}function x(t){return Array.isArray(t)?t:D}function _(t,e,n,i){return Object(u["g"])(t,e,n,i)}function w(t,e,n){return t!==n&&Object(o["k"])(n,t),n[3]=t[3]+e,n}function M(t,e,n){return b.error("sphere.setExtent is not yet supported"),t===n?n:m(t,n)}function S(t,e,n){if(Object(a["k"])(e))return!1;const{origin:i,direction:r}=e,s=T;s[0]=i[0]-t[0],s[1]=i[1]-t[1],s[2]=i[2]-t[2];const o=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],c=2*(r[0]*s[0]+r[1]*s[1]+r[2]*s[2]),l=c*c-4*o*(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]-t[3]*t[3]);if(l<0)return!1;const u=Math.sqrt(l);let h=(-c-u)/(2*o);const p=(-c+u)/(2*o);return(h<0||p<h&&p>0)&&(h=p),!(h<0)&&(n&&(n[0]=i[0]+r[0]*h,n[1]=i[1]+r[1]*h,n[2]=i[2]+r[2]*h),!0)}const T=Object(c["f"])();function V(t,e){return S(t,e,null)}function E(t,e,n){if(S(t,e,n))return n;const i=C(t,e,d["d"].get());return Object(o["f"])(n,e.origin,Object(o["e"])(d["d"].get(),e.direction,Object(o["m"])(e.origin,i)/Object(o["p"])(e.direction))),n}function C(t,e,n){const i=d["d"].get(),r=d["a"].get();Object(o["g"])(i,e.origin,e.direction);const a=j(t);Object(o["g"])(n,i,e.origin),Object(o["e"])(n,n,1/Object(o["p"])(n)*a);const c=R(t,e.origin),l=Object(p["a"])(e.origin,n);return Object(s["j"])(r),Object(s["f"])(r,r,l+c,i),Object(o["q"])(n,n,r),n}function I(t,e,n){return S(t,e,n)?n:(Object(h["a"])(e,x(t),n),P(t,n,n))}function P(t,e,n){const i=Object(o["j"])(d["d"].get(),e,x(t)),r=Object(o["e"])(d["d"].get(),i,t[3]/Object(o["p"])(i));return Object(o["f"])(n,r,x(t))}function k(t,e){const n=Object(o["j"])(d["d"].get(),e,x(t)),i=Object(o["t"])(n),r=t[3]*t[3];return Math.sqrt(Math.abs(i-r))}function R(t,e){const n=Object(o["j"])(d["d"].get(),e,x(t)),i=Object(o["p"])(n),a=j(t),s=a+Math.abs(a-i);return Object(r["a"])(a/s)}const z=Object(c["f"])();function G(t,e,n,i){const a=Object(o["j"])(z,e,x(t));switch(n){case 0:{const t=Object(r["c"])(a,z)[2];return Object(o["w"])(i,-Math.sin(t),Math.cos(t),0)}case 1:{const t=Object(r["c"])(a,z),e=t[1],n=t[2],s=Math.sin(e);return Object(o["w"])(i,-s*Math.cos(n),-s*Math.sin(n),Math.cos(e))}case 2:return Object(o["r"])(i,a);default:return}}function A(t,e){const n=Object(o["j"])(F,e,x(t));return Object(o["p"])(n)-t[3]}function L(t,e,n,i){const r=A(t,e),a=G(t,e,2,F),s=Object(o["e"])(F,a,n-r);return Object(o["f"])(i,e,s)}const D=Object(c["f"])(),F=Object(c["f"])(),H=Object.freeze({__proto__:null,create:f,copy:m,fromCenterAndRadius:g,wrap:y,clear:O,fromRadius:v,getRadius:j,getCenter:x,fromValues:_,elevate:w,setExtent:M,intersectRay:S,intersectsRay:V,intersectRayClosestSilhouette:E,closestPointOnSilhouette:C,closestPoint:I,projectPoint:P,distanceToSilhouette:k,angleToSilhouette:R,axisAt:G,altitudeAt:A,setAltitudeAt:L})}}]);
//# sourceMappingURL=chunk-40c5a146.4b7866bf.js.map