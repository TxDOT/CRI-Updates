(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Login"],{"0cb2":function(t,e,r){var n=r("e330"),a=r("7b0b"),o=Math.floor,i=n("".charAt),s=n("".replace),u=n("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,r,n,l,f){var g=r+t.length,h=n.length,m=d;return void 0!==l&&(l=a(l),m=c),s(f,m,(function(a,s){var c;switch(i(s,0)){case"$":return"$";case"&":return t;case"`":return u(e,0,r);case"'":return u(e,g);case"<":c=l[u(s,1,-1)];break;default:var d=+s;if(0===d)return a;if(d>h){var f=o(d/10);return 0===f?a:f<=h?void 0===n[f-1]?i(s,1):n[f-1]+i(s,1):a}c=n[d-1]}return void 0===c?"":c}))}},2532:function(t,e,r){"use strict";var n=r("23e7"),a=r("e330"),o=r("5a34"),i=r("1d80"),s=r("577e"),u=r("ab13"),c=a("".indexOf);n({target:"String",proto:!0,forced:!u("includes")},{includes:function(t){return!!~c(s(i(this)),s(o(t)),arguments.length>1?arguments[1]:void 0)}})},5319:function(t,e,r){"use strict";var n=r("2ba4"),a=r("c65b"),o=r("e330"),i=r("d784"),s=r("d039"),u=r("825a"),c=r("1626"),d=r("5926"),l=r("50c4"),f=r("577e"),g=r("1d80"),h=r("8aa5"),m=r("dc4a"),p=r("0cb2"),b=r("14c3"),v=r("b622"),y=v("replace"),x=Math.max,$=Math.min,w=o([].concat),k=o([].push),M=o("".indexOf),I=o("".slice),N=function(t){return void 0===t?t:String(t)},T=function(){return"$0"==="a".replace(/./,"$0")}(),O=function(){return!!/./[y]&&""===/./[y]("a","$0")}(),S=!s((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}));i("replace",(function(t,e,r){var o=O?"$":"$0";return[function(t,r){var n=g(this),o=void 0==t?void 0:m(t,y);return o?a(o,t,n,r):a(e,f(n),t,r)},function(t,a){var i=u(this),s=f(t);if("string"==typeof a&&-1===M(a,o)&&-1===M(a,"$<")){var g=r(e,i,s,a);if(g.done)return g.value}var m=c(a);m||(a=f(a));var v=i.global;if(v){var y=i.unicode;i.lastIndex=0}var T=[];while(1){var O=b(i,s);if(null===O)break;if(k(T,O),!v)break;var S=f(O[0]);""===S&&(i.lastIndex=h(s,l(i.lastIndex),y))}for(var E="",j=0,L=0;L<T.length;L++){O=T[L];for(var C=f(O[0]),_=x($(d(O.index),s.length),0),R=[],J=1;J<O.length;J++)k(R,N(O[J]));var A=O.groups;if(m){var D=w([C],R,_,s);void 0!==A&&k(D,A);var U=f(n(a,void 0,D))}else U=p(C,s,_,R,A,a);_>=j&&(E+=I(s,j,_)+U,j=_+C.length)}return E+I(s,j)}]}),!S||!T||O)},"5a34":function(t,e,r){var n=r("da84"),a=r("44e7"),o=n.TypeError;t.exports=function(t){if(a(t))throw o("The method doesn't accept regular expressions");return t}},a55b:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{persistent:"","max-width":"500",id:"cardDisplay"},model:{value:t.disagree,callback:function(e){t.disagree=e},expression:"disagree"}},[r("v-card",{staticStyle:{"border-radius":"0px"},attrs:{height:"250"},model:{value:t.disagree,callback:function(e){t.disagree=e},expression:"disagree"}},[r("v-card-actions",[!1===t.certify?r("div",{attrs:{id:"loginBannerPos"}},[r("v-alert",{attrs:{color:"#14375A",border:"top",dark:"",id:"loginBannerTxt"},domProps:{innerHTML:t._s(t.statusMessageFalse)}})],1):t._e(),r("div",{staticClass:"black--text mb-3",attrs:{id:"loginTxt"}},[r("v-card-text",{staticStyle:{color:"black"},domProps:{innerHTML:t._s(t.disagreeTxt)}})],1),r("div",{attrs:{id:"loginBtnPos"}},[r("v-btn",{attrs:{id:"loginButton",outlined:"",tile:"",color:"#14375A"},on:{click:function(e){t.disagree=!1,t.logMeIn()}}},[r("u",[t._v("Login")])])],1),r("v-btn",{attrs:{id:"SignupBtnPos",depressed:"",text:"",tile:"",color:"black","x-small":"",onclick:"window.open('https://www.txdot.gov/data-maps/roadway-inventory/cri-form.html','_blank')"}},[t._v(" Sign-Up ")])],1)],1)],1)},a=[],o=r("1da1"),i=(r("96cf"),r("99af"),r("7db0"),r("d3b7"),r("b64b"),r("ac1f"),r("1276"),r("caad"),r("2532"),r("5319"),r("e9c4"),r("a9e3"),r("3514")),s=r("9e3e"),u=r("1baa"),c=r("f793"),d=r("d81c8"),l=r("0224"),f=r("69dd"),g={name:"Login",props:["id"],data:function(){return{statusMessageTrue:"",statusMessageFalse:"",certify:!1,disagree:!0,countyPopup:!1,disagreeTxt:"<br><br>Click the Login button and use your TxDOT-provided credentials to access the County Road Inventory Map. If you do not have an account, click the Sign-Up button to register.",judgeName:"",county:"",auth:{},cntyNme:"",loginToMap:!1}},beforeRouteLeave:function(t,e,r){this.loginToMap?r():r(!1)},mounted:function(){var t=this;this.auth=new c["a"]({appId:"9XWrQUJ2eX0jXEAW",expiration:10080,popup:!1}),d["default"].registerOAuthInfos([this.auth]),d["default"].checkSignInStatus("https://txdot.maps.arcgis.com/sharing").then((function(){t.handleSignedIn()})).catch((function(t){console.log(t)})),this.certify=!1;var e=new Date;this.certiAlert="<p>By clicking submit, you are certifying the mileage for your county and completing the process for ".concat(e.getFullYear()-1,".<br> Edits made in ").concat(e.getFullYear()," after certifying are allowed, but will need to be recertified by the county judge prior to <DATE> in order to be accepted."),e.toDateString(),this.statusMessageFalse="The TxDOT County Road Inventory Map"},methods:{logMeIn:function(){d["default"].getCredential(this.auth.portalUrl+"/sharing"),console.log("logging in")},loadMap:function(t,e){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(s["b"])(t,e);case 2:r.$router.push("/map"),r.loginToMap=!1;case 4:case"end":return n.stop()}}),n)})))()},handleSignedIn:function(){var t=this,e=new l["a"];this.loginToMap=!0,e.load().then(Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(console.log(e.user.email),t.usrEmail=e.user.email,t.$router.push("/load"),Object(s["c"])(e.user.fetchGroups()),t.userName=e.user.username,!localStorage.getItem("county")){r.next=9;break}r.t0=JSON.parse(localStorage.getItem("county")),r.next=12;break;case 9:return r.next=11,t.getCountyInfo(e.user.username);case 11:r.t0=r.sent;case 12:if(n=r.t0,n){r.next=15;break}return r.abrupt("return");case 15:a=n[1],o=n[0],t.countyName=o,t.countyNumber=a,t.countyMiles=n[2],t.loadMap(o,a);case 21:case"end":return r.stop()}}),r)}))))},getCountyInfo:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=Object.keys(u["a"][0]).find((function(e){var r=t.split("_");if(r[1].toLowerCase().includes(u["a"][0][e].replace(/\s/,"").toLowerCase()))return n=u["a"][0][e],u["a"][0]})),!a){r.next=16;break}return o="CNTY_NBR = '".concat(a,"'"),s=new f["a"],s.where=o,s.outFields=["*"],r.next=8,i["countyOfficialInfo"].queryFeatures(s);case 8:return c=r.sent,e.countyNumber=a,e.judgeNameSend=c.features[0].attributes["JUDGE_NM"],e.judgeEmailSend=c.features[0].attributes["JUDGE_EML"],localStorage.setItem("county",JSON.stringify([n,a,c.features[0].attributes["TOT_MLGE"]])),r.abrupt("return",[n,Number(a),c.features[0].attributes["TOT_MLGE"]]);case 16:return e.$router.push({name:"PickCounty"}),r.abrupt("return");case 18:case"end":return r.stop()}}),r)})))()}},computed:{setLogOut:{get:function(){return this.$store.state.isLoggedOut},set:function(t){this.$store.commit("setIsLoggedOut",t)}},countyName:{get:function(){return this.$store.state.cntyName},set:function(t){this.$store.commit("setCntyName",t)}},countyNumber:{get:function(){return this.$store.state.cntyNmbr},set:function(t){this.$store.commit("setCntyNmbr",t)}},countyMiles:{get:function(){return this.$store.state.cntyMiles},set:function(t){this.$store.commit("setCntyMiles",t)}},userName:{get:function(){return this.$store.state.username},set:function(t){this.$store.commit("setUserName",t)}},usrEmail:{get:function(){return this.$store.state.userEmail},set:function(t){this.$store.commit("setUserEmail",t)}},logIn:{get:function(){return this.$store.state.isLoggedIn},set:function(t){this.$store.commit("setIsLoggedIn",t)}},judgeNameSend:{get:function(){return this.$store.state.judgeName},set:function(t){this.$store.commit("setJudgeName",t)}},judgeEmailSend:{get:function(){return this.$store.state.judgeEmail},set:function(t){this.$store.commit("setJudgeEmail",t)}}}},h=g,m=(r("d6db"),r("2877")),p=Object(m["a"])(h,n,a,!1,null,null,null);e["default"]=p.exports},ab13:function(t,e,r){var n=r("b622"),a=n("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[a]=!1,"/./"[t](e)}catch(n){}}return!1}},b64b:function(t,e,r){var n=r("23e7"),a=r("7b0b"),o=r("df75"),i=r("d039"),s=i((function(){o(1)}));n({target:"Object",stat:!0,forced:s},{keys:function(t){return o(a(t))}})},caad:function(t,e,r){"use strict";var n=r("23e7"),a=r("4d64").includes,o=r("44d2");n({target:"Array",proto:!0},{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},d6db:function(t,e,r){"use strict";r("e67a")},e67a:function(t,e,r){}}]);
//# sourceMappingURL=Login.2dc6b3bf.js.map