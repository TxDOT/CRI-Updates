(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Login"],{a55b:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-dialog",{attrs:{persistent:"","max-width":"500",id:"cardDisplay"},model:{value:t.disagree,callback:function(e){t.disagree=e},expression:"disagree"}},[t.isAlert?s("v-alert",{staticClass:"valert",attrs:{type:"success","max-width":"500"}},[t._v(" Form has been submitted successfully! ")]):t._e(),s("v-card",{staticClass:"login-card",attrs:{height:"250"}},[s("v-card-actions",[!1===t.certify?s("div",{attrs:{id:"loginBannerPos"}},[s("v-alert",{attrs:{color:"#14375A",border:"top",dark:"",id:"loginBannerTxt"},domProps:{innerHTML:t._s(t.statusMessageFalse)}})],1):t._e(),s("div",{staticClass:"black--text mb-3",attrs:{id:"loginTxt"}},[s("v-card-text",{staticStyle:{color:"black"},domProps:{innerHTML:t._s(t.disagreeTxt)}})],1),s("div",{attrs:{id:"loginBtnPos"}},[s("v-btn",{attrs:{id:"loginButton",outlined:"",tile:"",color:"#14375A"},on:{click:function(e){t.disagree=!1,t.logMeIn()}}},[s("u",[t._v("Login")])])],1),s("v-btn",{attrs:{id:"SignupBtnPos",depressed:"",text:"",tile:"",color:"black","x-small":""},on:{click:function(e){t.registerpopup=!0,t.login=!1}}},[t._v(" Sign-Up ")])],1)],1),t.registerpopup?s("v-card",{staticClass:"signup-card",attrs:{height:"700"}},[t.isSpinner?s("v-progress-circular",{staticClass:"spinner",attrs:{size:50,color:"primary",indeterminate:""}}):t._e(),s("v-card-actions",[s("div",{attrs:{id:"registerBannerPos"}},[s("v-alert",{attrs:{color:"#14375A",border:"top",dark:"",id:"loginBannerTxt"},domProps:{innerHTML:t._s(t.statusMessageFalseRegister)}})],1),s("v-card-text",{attrs:{id:"formtext"}},[t._v("Complete this form to create an account for reviewing and updating your county roads in the County Road Inventory Map. You will receive an email within 24 hours containing your username and password. ")]),s("v-form",{staticClass:"formPos"},[s("v-col",[s("v-row",{staticClass:"signup-form"},[s("v-text-field",{staticClass:"custom-border-radius",attrs:{required:"",label:"First Name",rules:t.firstNameRequired,outlined:!0,dense:!0},model:{value:t.firstName,callback:function(e){t.firstName=e},expression:"firstName"}})],1),s("v-row",{staticClass:"signup-form"},[s("v-text-field",{staticClass:"custom-border-radius",attrs:{required:"",label:"Last Name",rules:t.lastNameRequired,outlined:!0,dense:!0},model:{value:t.lastName,callback:function(e){t.lastName=e},expression:"lastName"}})],1),s("v-row",{staticClass:"signup-form"},[s("v-text-field",{staticClass:"custom-border-radius",attrs:{required:"",label:"Email",rules:t.emailRequired,outlined:!0,dense:!0},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),s("v-row",{staticClass:"signup-form"},[s("v-text-field",{staticClass:"custom-border-radius",attrs:{required:"",label:"Phone",rules:t.phoneRequired,outlined:!0,dense:!0},on:{input:t.formatPhone},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),s("v-row",{staticClass:"signup-form"},[s("v-select",{staticClass:"custom-border-radius",attrs:{items:t.cntyNames,required:"",label:"County",rules:t.countyRequired,outlined:!0,dense:!0},model:{value:t.county,callback:function(e){t.county=e},expression:"county"}})],1)],1)],1),s("v-card-text",{attrs:{id:"termstext"}},[t._v(" Terms and Conditions: "),s("br"),s("ol",[s("li",[t._v("I am authorized by the county judge to make edits to the County Road Inventory for my county.")]),s("li",[t._v(" I will not share my username and password. If another individual from my county needs access to the County Road Inventory, I will advise this person to submit a request for their own account.")]),s("li",[t._v(" If I no longer need access to the County Road Inventory, I will contact TxDOT to request deactivation of my account. Accounts will be reviewed periodically for inactivity by TxDOT and deactivated if deemed appropriate.")])]),s("v-checkbox",{staticClass:"custom-checkbox",attrs:{label:"I accept the terms and conditions.",dense:!0},model:{value:t.checkboxvalue,callback:function(e){t.checkboxvalue=e},expression:"checkboxvalue"}}),t._v(" Please be aware that all information (except your email address) submitted on this form is subject to public disclosure under the Texas Public Information Act. Thank you for your participation in the County Road Inventory program. For any questions, problems, or to check the status of your account, please send an email to "),s("a",{staticStyle:{"text-decoration":"none"},attrs:{href:"mailto:TPP_CRI@txdot.gov"}},[t._v("TPP_CRI@txdot.gov.")])],1),s("div",{staticClass:"btnblocker",style:{pointerEvents:t.btnBlockerPointerEvents}},[s("div",{staticClass:"buttonPos"},[s("v-btn",{staticClass:"cancelButton",attrs:{depressed:"",text:"",tile:""},on:{click:function(e){t.registerpopup=!1,t.clearValues()}}},[t._v("cancel")]),s("v-btn",{staticClass:"continueButton",attrs:{outlined:"",tile:"",color:"#14375A",disabled:t.formDisabled},on:{click:function(e){return t.handlesubmit()}}},[s("u",[t._v("submit")])])],1)])],1)],1):t._e()],1)},a=[],r=s("3514"),o=s("0fc3"),n=s("9e3e"),l=s("1baa"),u=s("f793"),c=s("d81c8"),d=s("0224"),h=s("69dd"),A={name:"Login",props:["id"],data(){return{btnBlockerPointerEvents:"all",isAlert:!1,isSpinner:!1,checkboxvalue:!1,countyvalid:!1,emailvalid:!1,firstnvalid:!1,lastnvalid:!1,phonevalid:!1,isDisabled:!1,cntyNbrNm:l["a"],registerpopup:!1,statusMessageTrue:"",statusMessageFalse:"",statusMessageFalseRegister:"",certify:!1,disagree:!0,countyPopup:!1,disagreeTxt:"<br><br>Click the Login button and use your TxDOT-provided credentials to access the County Road Inventory Map. If you do not have an account, click the Sign-Up button to register.",judgeName:"",auth:{},cntyNme:"",login:!0,loginToMap:!1,isCertify:!1,signup:!1,firstName:"",firstNameRequired:[t=>!!t.length||"First Name is required",t=>t.length>=3?(this.firstnvalid=!0,!0):(this.firstnvalid=!1,"First Name must be greater than 3 characters")],lastName:"",lastNameRequired:[t=>!!t||"Last Name is required",t=>t.length>=3?(this.lastnvalid=!0,!0):(this.lastnvalid=!1,"Last Name must be greater than 3 characters")],email:"",emailRequired:[t=>/.+@.+\..+/.test(t)?(this.emailvalid=!0,!0):(this.emailvalid=!1,"E-mail must be valid")],phone:"",phoneRequired:[t=>14==t.length?(this.phonevalid=!0,!0):(this.phonevalid=!1,"Phone number must be valid")],county:"",countyRequired:[t=>t?(this.countyvalid=!0,!0):(this.countyvalid=!1,"County is required")],cntyNames:["ANDERSON","ANDREWS","ANGELINA","ARANSAS","ARCHER","ARMSTRONG","ATASCOSA","AUSTIN","BAILEY","BANDERA","BASTROP","BAYLOR","BEE","BELL","BEXAR","BLANCO","BORDEN","BOSQUE","BOWIE","BRAZORIA","BRAZOS","BREWSTER","BRISCOE","BROOKS","BROWN","BURLESON","BURNET","CALDWELL","CALHOUN","CALLAHAN","CAMERON","CAMP","CARSON","CASS","CASTRO","CHAMBERS","CHEROKEE","CHILDRESS","CLAY","COCHRAN","COKE","COLEMAN","COLLIN","COLLINGSWORTH","COLORADO","COMAL","COMANCHE","CONCHO","COOKE","CORYELL","COTTLE","CRANE","CROCKETT","CROSBY","CULBERSON","DALLAM","DALLAS","DAWSON","DE WITT","DEAF SMITH","DELTA","DENTON","DICKENS","DIMMIT","DONLEY","DUVAL","EASTLAND","ECTOR","EDWARDS","EL PASO","ELLIS","ERATH","FALLS","FANNIN","FAYETTE","FISHER","FLOYD","FOARD","FORT BEND","FRANKLIN","FREESTONE","FRIO","GAINES","GALVESTON","GARZA","GILLESPIE","GLASSCOCK","GOLIAD","GONZALES","GRAY","GRAYSON","GREGG","GRIMES","GUADALUPE","HALE","HALL","HAMILTON","HANSFORD","HARDEMAN","HARDIN","HARRIS","HARRISON","HARTLEY","HASKELL","HAYS","HEMPHILL","HENDERSON","HIDALGO","HILL","HOCKLEY","HOOD","HOPKINS","HOUSTON","HOWARD","HUDSPETH","HUNT","HUTCHINSON","IRION","JACK","JACKSON","JASPER","JEFF DAVIS","JEFFERSON","JIM HOGG","JIM WELLS","JOHNSON","JONES","KARNES","KAUFMAN","KENDALL","KENEDY","KENT","KERR","KIMBLE","KING","KINNEY","KLEBERG","KNOX","LA SALLE","LAMAR","LAMB","LAMPASAS","LAVACA","LEE","LEON","LIBERTY","LIMESTONE","LIPSCOMB","LIVE OAK","LLANO","LOVING","LUBBOCK","LYNN","MADISON","MARION","MARTIN","MASON","MATAGORDA","MAVERICK","MCCULLOCH","MCLENNAN","MCMULLEN","MEDINA","MENARD","MIDLAND","MILAM","MILLS","MITCHELL","MONTAGUE","MONTGOMERY","MOORE","MORRIS","MOTLEY","NACOGDOCHES","NAVARRO","NEWTON","NOLAN","NUECES","OCHILTREE","OLDHAM","ORANGE","PALO PINTO","PANOLA","PARKER","PARMER","PECOS","POLK","POTTER","PRESIDIO","RAINS","RANDALL","REAGAN","REAL","RED RIVER","REEVES","REFUGIO","ROBERTS","ROBERTSON","ROCKWALL","RUNNELS","RUSK","SABINE","SAN AUGUSTINE","SAN JACINTO","SAN PATRICIO","SAN SABA","SCHLEICHER","SCURRY","SHACKELFORD","SHELBY","SHERMAN","SMITH","SOMERVELL","STARR","STEPHENS","STERLING","STONEWALL","SUTTON","TARRANT","TAYLOR","TERRELL","TERRY","THROCKMORTON","TITUS","TOM GREEN","TRAVIS","TRINITY","TYLER","UPSHUR","UPTON","UVALDE","VAL VERDE","VAN ZANDT","VICTORIA","WALKER","WALLER","WARD","WASHINGTON","WEBB","WHARTON","WHEELER","WICHITA","WILBARGER","WILLACY","WILLIAMSON","WILSON","WINKLER","WISE","WOOD","YOAKUM","YOUNG","ZAPATA","ZAVALA","SWISHER"]}},beforeRouteLeave(t,e,s){this.loginToMap?s():s(!1)},mounted(){this.auth=new u["a"]({appId:"9XWrQUJ2eX0jXEAW",expiration:10080,popup:!1}),c["default"].registerOAuthInfos([this.auth]),c["default"].checkSignInStatus("https://txdot.maps.arcgis.com/sharing").then(()=>{this.handleSignedIn()}).catch(t=>{console.warn("logged out",t)}),this.certify=!1;const t=new Date;this.certiAlert=`<p>By clicking submit, you are certifying the mileage for your county and completing the process for ${t.getFullYear()-1}.<br> Edits made in ${t.getFullYear()} after certifying are allowed, but will need to be recertified by the county judge prior to <DATE> in order to be accepted.`,t.toDateString(),this.statusMessageFalse="The TxDOT County Road Inventory Map",this.statusMessageFalseRegister="County Road Inventory Registration"},methods:{handlesubmit(){let t=`https://gis-batch-dnd.txdot.gov/fmejobsubmitter/TPP-MB/CountyAGOemailer.fmw?First_Name=${this.firstName}&Last_Name=${this.lastName}&Email=${this.email}&Phone=${this.phone}&COUNTY=${this.county}&opt_showresult=false&opt_servicemode=sync&token=3b29e4f4fc49088ae415b595fabd69bb5cf32bc6`;this.sendRequest(t)},async sendRequest(t){try{this.isSpinner=!0,this.btnBlockerPointerEvents="none";const e=await fetch(t);if(this.btnBlockerPointerEvents="all",this.isSpinner=!1,this.registerpopup=!1,this.clearValues(),this.checkboxvalue=!1,this.isAlert=!0,setTimeout(()=>{this.isAlert=!1},5e3),!e.ok)throw new Error("Network response was not ok")}catch(e){console.error("Error:",e)}},formatPhone(){let t=this.phone.replace(/\D/g,"");t.length>0&&(t=t.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3")),this.phone=t},togglepopup(){this.registerpopup=!this.registerpopup},async getCountyJudge(t){let e=`CNTY_NBR = '${t}'`;const s=new h["a"];s.where=e,s.outFields=["*"];let i=await r["countyOfficialInfo"].queryFeatures(s);return this.countyNumber=t,this.judgeCntyOid=i.features[0].attributes["OBJECTID"],this.judgeNameSend=i.features[0].attributes["JUDGE_NM"],this.judgeEmailSend=i.features[0].attributes["JUDGE_EML"],this.isCertify="Y"===i.features[0].attributes["CERTFD"],i.features[0].attributes["TOT_MLGE"]},checkLocalStorage(){let t=JSON.parse(localStorage.getItem("county"));return this.getCountyJudge(t[1]),t},logMeIn(){c["default"].getCredential(this.auth.portalUrl+"/sharing")},async loadMap(t,e){const s=await Object(n["b"])(t,e),[i,a]=Object(o["e"])();0===s&&8===i&&(a>=1||a<15)?this.$router.push("/EOY"):(this.$router.push("/map"),this.loginToMap=!1)},handleSignedIn(){const t=new d["a"];this.loginToMap=!0,t.load().then(async()=>{if(this.isCertify)return void this.$router.push("/EOY");this.usrEmail=t.user.email,this.$router.push("/load"),Object(n["c"])(t.user.fetchGroups()),this.userName=t.user.username;let e=localStorage.getItem("county")?this.checkLocalStorage():await this.getCountyInfo(t.user.username);if(!e)return;let s=e[1],i=e[0];this.countyName=i,this.countyNumber=s,this.countyMiles=e[2],this.loadMap(i,s)})},async getCountyInfo(t){let e,s=Object.keys(l["a"][0]).find(s=>{let i=t.split("_");if(i[1].toLowerCase()===l["a"][0][s].replace(/\s/,"").toLowerCase())return e=l["a"][0][s],l["a"][0]});if(s){let t=await this.getCountyJudge(s);return localStorage.setItem("county",JSON.stringify([e,s,t])),[e,Number(s),t]}this.$router.push({name:"PickCounty"})},handlecaps:t=>t?t.toLowerCase():"",clearValues(){this.firstName="",this.lastName="",this.email="",this.phone="",this.county=""}},watch:{},computed:{formDisabled(){return!(this.emailvalid&&this.lastnvalid&&this.firstnvalid&&this.phonevalid&&this.countyvalid&&this.checkboxvalue)},setLogOut:{get(){return this.$store.state.isLoggedOut},set(t){this.$store.commit("setIsLoggedOut",t)}},countyName:{get(){return this.$store.state.cntyName},set(t){this.$store.commit("setCntyName",t)}},countyNumber:{get(){return this.$store.state.cntyNmbr},set(t){this.$store.commit("setCntyNmbr",t)}},countyMiles:{get(){return this.$store.state.cntyMiles},set(t){this.$store.commit("setCntyMiles",t)}},userName:{get(){return this.$store.state.username},set(t){this.$store.commit("setUserName",t)}},usrEmail:{get(){return this.$store.state.userEmail},set(t){this.$store.commit("setUserEmail",t)}},logIn:{get(){return this.$store.state.isLoggedIn},set(t){this.$store.commit("setIsLoggedIn",t)}},judgeNameSend:{get(){return this.$store.state.judgeName},set(t){this.$store.commit("setJudgeName",t)}},judgeEmailSend:{get(){return this.$store.state.judgeEmail},set(t){this.$store.commit("setJudgeEmail",t)}},judgeCntyOid:{get(){return this.$store.state.judgeObjectId},set(t){this.$store.commit("setJudgeObjectId",t)}}}},E=A,m=(s("d6db"),s("2877")),N=Object(m["a"])(E,i,a,!1,null,null,null);e["default"]=N.exports},d6db:function(t,e,s){"use strict";s("e67a")},e67a:function(t,e,s){}}]);
//# sourceMappingURL=Login.b3b90276.js.map